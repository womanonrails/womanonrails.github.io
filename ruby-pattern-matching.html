<!DOCTYPE html><html lang="en"><head><meta charset='utf-8'><title>Ruby pattern matching</title><meta name='description' content='Pattern matching - new feature of Ruby 2.7'><meta name='viewport' content='width=device-width, initial-scale=1.0'><meta name="generator" content="Jekyll v4.0.1" /><meta property="og:title" content="Ruby pattern matching" /><meta name="author" content="womanonrails" /><meta property="og:locale" content="en" /><meta name="description" content="Pattern matching - new feature of Ruby 2.7" /><meta property="og:description" content="Pattern matching - new feature of Ruby 2.7" /><link rel="canonical" href="https://womanonrails.com/ruby-pattern-matching" /><meta property="og:url" content="https://womanonrails.com/ruby-pattern-matching" /><meta property="og:site_name" content="Woman on Rails" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2019-06-12T00:00:00-04:00" /> <script type="application/ld+json"> {"description":"Pattern matching - new feature of Ruby 2.7","url":"https://womanonrails.com/ruby-pattern-matching","@type":"BlogPosting","headline":"Ruby pattern matching","dateModified":"2019-06-12T00:00:00-04:00","datePublished":"2019-06-12T00:00:00-04:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://womanonrails.com/ruby-pattern-matching"},"author":{"@type":"Person","name":"womanonrails"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://womanonrails.com/womanonrails-square.svg"},"name":"womanonrails"},"@context":"https://schema.org"}</script><meta name='twitter:card' content='summary'><meta name='twitter:creator' content='@womanonrails'><meta name='twitter:description' content='Pattern matching - new feature of Ruby 2.7'><meta name='twitter:image' content='https://womanonrails.com/images/womanonrails-square.svg'><meta name='twitter:title' content='Ruby pattern matching'><meta property='og:description' content='Pattern matching - new feature of Ruby 2.7'><meta property='og:image' content='https://womanonrails.com/images/womanonrails-1000x1000.jpg'><meta property='og:title' content='Ruby pattern matching'><meta property='og:type' content='website'><link href='https://womanonrails.com/favicon.ico' rel='shortcut icon' type='image/x-icon' /><link href='https://womanonrails.com/favicon.png' rel='shortcut icon' type='image/png' /><link href='/feed.xml' rel='alternate' title='Woman on Rails Feed' type='application/atom+xml' /><link async href='/assets/css/bootstrap.css' media='all' rel='stylesheet' /><link href='/assets/css/style.css' media='all' rel='stylesheet' /><link href='/css/main.css' media='all' rel='stylesheet' /><link href='/assets/css/applause-button.css' rel='stylesheet' /> <script defer src='/assets/js/applause-button.js'></script><div class="search-wrapper"><div class="search-form"> <input type="text" class="search-field" placeholder="Search..."> <span class='js-remove-sign'> <span class='svg--cancel'><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 375 375"><path d="M187.5 2.5a185 185 0 0 0-185 185 185 185 0 0 0 185 185 185 185 0 0 0 185-185 185 185 0 0 0-185-185zm-85.906 78.875a20.232 20.232 0 0 1 14.518 6.132l71.388 71.388 71.388-71.388a20.232 20.232 0 0 1 13.909-6.121 20.232 20.232 0 0 1 14.702 34.73l-71.39 71.388 71.39 71.39a20.232 20.232 0 1 1-28.61 28.61L187.5 216.115l-71.388 71.389a20.232 20.232 0 1 1-28.611-28.61l71.39-71.39-71.39-71.388a20.232 20.232 0 0 1 14.093-34.74z"/></svg></span> </span><ul class="search-results post-list"></ul></div></div></head><body class="post-template" itemscope itemtype="https://schema.org/WebPage"><div id="fade"></div><a id="slide" class="animated fade"></a><aside id="sidebar"><nav id="navigation"><h2>MENU</h2><hr><ul><li> <a href="https://womanonrails.com/">Home</a></li><li> <a href="https://womanonrails.com/workshops">Programming courses</a></li><li> <a href="https://womanonrails.com/categories">Categories</a></li><li> <a href="https://womanonrails.com/tags">Tags</a></li><li> <a href="https://womanonrails.com/presentations/">Presentations</a></li><li> <a href="https://womanonrails.com/about">About me</a></li><li> <a href="/feed.xml" title='Atom/RSS feed'> <span class='svg--rss'><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>RSS icon</title><path d="M19.199 24C19.199 13.467 10.533 4.8 0 4.8V0c13.165 0 24 10.835 24 24h-4.801zM3.291 17.415c1.814 0 3.293 1.479 3.293 3.295 0 1.813-1.485 3.29-3.301 3.29C1.47 24 0 22.526 0 20.71s1.475-3.294 3.291-3.295zM15.909 24h-4.665c0-6.169-5.075-11.245-11.244-11.245V8.09c8.727 0 15.909 7.184 15.909 15.91z"/></svg></span> Feed </a></li></ul></nav></aside><header class='blog-background overlay align-center align-middle animated from-bottom' id='masthead' itemscope itemtype='https://schema.org/Organization'> <button class='menu-button animated fade dosearch' title='Search'> <span class='svg--search'><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 13"> <g stroke-width="1.5" fill="none"><path d="M11.29 11.71l-4-4"/><circle cx="5" cy="5" r="4"/> </g> </svg></span> </button> <a href="/pl/ruby-pattern-matching" class='language animated fade'> pl </a><div class='inner'><div class='container'> <a class='brand' href='/' itemprop='url' role='banner'> <img itemprop='logo' src="https://womanonrails.com/images/womanonrails-square.svg" alt="Woman on Rails Logo" width='120' /><h1 class='blog-title light' itemprop='name'> Woman on Rails</h1></a><h2 class='blog-description light bordered bordered-top' itemprop='description'> Premature optimization is the root of all evil.</h2></div></div><div class="decor-wrapper"> <svg id="header-decor" class="decor bottom" xmlns="https://www.w3.org/2000/svg" version="1.1" viewBox="0 0 100 100" preserveAspectRatio="none"><path class="large left" d="M0 0 L50 50 L0 100" fill="rgba(255,255,255, .1)"></path><path class="large right" d="M100 0 L50 50 L100 100" fill="rgba(255,255,255, .1)"></path><path class="medium left" d="M0 100 L50 50 L0 33.3" fill="rgba(255,255,255, .3)"></path><path class="medium right" d="M100 100 L50 50 L100 33.3" fill="rgba(255,255,255, .3)"></path><path class="small left" d="M0 100 L50 50 L0 66.6" fill="rgba(255,255,255, .5)"></path><path class="small right" d="M100 100 L50 50 L100 66.6" fill="rgba(255,255,255, .5)"></path><path d="M0 99.9 L50 49.9 L100 99.9 L0 99.9" fill="rgba(255,255,255, 1)"></path><path d="M48 52 L50 49 L52 52 L48 52" fill="rgba(255,255,255, 1)"></path> </svg></div></header><div class='content' id='main' itemprop='mainContentOfPage' itemscope itemtype='https://schema.org/WebPageElement' role='main'><div class='container'><div class='row'><div class='applause hidden-xs hidden-sm'> <applause-button color='#c33' multiclap='true' style='width: 58px; height: 58px;' url='https://womanonrails.com/ruby-pattern-matching' /></div><article class='post col-md-8 col-md-offset-2 hentry' itemprop='blogPost' itemscope itemtype='https://schema.org/BlogPosting'><header class='post-header entry-header'><h1 class='post-title text-center hyper lighter bordered-bottom entry-title' itemprop='headline'> Ruby pattern matching</h1><div class='cursive'>Pattern matching - new feature of Ruby 2.7</div><div class='post-info text-center small'> <span class='post-tags'> <a data-toggle='tooltip' href="/categories/#programming" title="Other posts from the Programming category" rel="tag">Programming</a> </span> | <span class='post-tags reading-time'> <span class='time'>9</span> min. </span></div></header><div class='post-body bordered-bottom' itemprop='description'><p>Some time ago I wrote an article about <a href="/elixir-pattern-matching" title="Elixir - How to fit to the pattern?">Pattern matching in Elixir</a>. I really like this idea. Now from Ruby version 2.7 we have <strong>pattern matching in Ruby</strong>!!! It is not the same like in Elixir, but it is a nice feature to have. Keep in mind that this is still an experimental feature, so it can change in the future versions of Ruby. Let’s check out what we can do with pattern matching in Ruby.</p><p>Before we start, let’s remind ourselves <strong>what is pattern matching?</strong> Pattern matching is a way to specify a pattern for our data and if data are matched to the pattern we can deconstruct them according to this pattern. In other words: Pattern matching is choosing specific elements from data, based on defined rules. We can also say that pattern matching is like <em>regular expressions</em> with multiple assignments not only for strings.</p><p>In the beginning of <em>Pattern Matching in Elixir</em> article, I started from <strong>basic match operator</strong> in Elixir. Because Ruby was created based on different concepts than Elixir, we will not have anything like <strong>match operator</strong> in Ruby. We have normal <strong>assignment</strong>. So when in Elixir we can do:</p><div class="language-elixir highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">iex</span><span class="o">&gt;</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">4</span>
<span class="mi">4</span>

<span class="n">iex</span><span class="o">&gt;</span> <span class="mi">4</span> <span class="o">=</span> <span class="n">x</span>
<span class="mi">4</span>
</code></pre></div></div><p>this is not possible in Ruby:</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">irb</span><span class="o">&gt;</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">4</span>
 <span class="o">=&gt;</span> <span class="mi">4</span>
<span class="n">irb</span><span class="o">&gt;</span> <span class="mi">4</span> <span class="o">=</span> <span class="n">x</span>
<span class="no">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
        <span class="mi">3</span><span class="p">:</span> <span class="n">from</span> <span class="sr">/home/</span><span class="n">agnieszka</span><span class="o">/</span><span class="p">.</span><span class="nf">rvm</span><span class="o">/</span><span class="n">rubies</span><span class="o">/</span><span class="n">ruby</span><span class="o">-</span><span class="mf">2.7</span><span class="o">.</span><span class="mi">0</span><span class="o">-</span><span class="n">preview1</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">irb</span><span class="p">:</span><span class="mi">23</span><span class="ss">:in</span> <span class="sb">`&lt;main&gt;'
        2: from /home/agnieszka/.rvm/rubies/ruby-2.7.0-preview1/bin/irb:23:in `</span><span class="nb">load</span><span class="s1">'
        1: from /home/agnieszka/.rvm/rubies/ruby-2.7.0-preview1/lib/ruby/gems/2.7.0/gems/irb-1.0.0/exe/irb:11:in `&lt;top (required)&gt;'</span>
<span class="no">SyntaxError</span> <span class="p">((</span><span class="n">irb</span><span class="p">):</span><span class="mi">2</span><span class="p">:</span> <span class="n">syntax</span> <span class="n">error</span><span class="p">,</span> <span class="n">unexpected</span> <span class="s1">'='</span><span class="p">,</span> <span class="n">expecting</span> <span class="k">end</span><span class="o">-</span><span class="n">of</span><span class="o">-</span><span class="n">input</span><span class="p">)</span>
<span class="mi">4</span> <span class="o">=</span> <span class="n">x</span>
  <span class="o">^</span>
</code></pre></div></div><p>I don’t say that Ruby is worse then Elixir. I’m showing you this to explain how big of a challenge was to put pattern matching in Ruby. I want you to be forgiving if something is not working like you would like to. There is still work to do, questions to answer and decisions to take. Be patient and celebrate with me this first step of pattern matching in Ruby.</p><h2 id="pattern-matching-in-ruby---basics">Pattern matching in Ruby - basics</h2><p>For pattern matching in Ruby, we have new syntax for <code class="highlighter-rouge">case</code>. It looks like this:</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">case</span> <span class="n">expression</span>
<span class="k">in</span> <span class="n">pattern</span> <span class="p">[</span><span class="k">if</span><span class="o">|</span><span class="k">unless</span> <span class="n">condition</span><span class="p">]</span>
  <span class="o">...</span>
<span class="k">in</span> <span class="n">pattern</span> <span class="p">[</span><span class="k">if</span><span class="o">|</span><span class="k">unless</span> <span class="n">condition</span><span class="p">]</span>
  <span class="o">...</span>
<span class="k">else</span>
  <span class="o">...</span>
<span class="k">end</span>
</code></pre></div></div><p>The patterns are run in the order, like with normal <code class="highlighter-rouge">case</code> until we find the first match. In case there will be no pattern found, <code class="highlighter-rouge">else</code> clause will be executed. If there is no pattern and no <code class="highlighter-rouge">else</code> clause, we will get <code class="highlighter-rouge">NoMatchingPatternError</code>. Check out the examples below.</p><h2 id="pattern-matching-with-array">Pattern matching with Array</h2><p>One of the simplest examples of the array is:</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">case</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="k">in</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="n">a</span><span class="p">]</span>
  <span class="ss">:no_match</span>
<span class="k">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="n">a</span><span class="p">]</span>
  <span class="ss">:match</span>
<span class="k">end</span>
 <span class="o">=&gt;</span> <span class="ss">:match</span>

<span class="n">irb</span><span class="o">&gt;</span> <span class="n">a</span>
 <span class="o">=&gt;</span> <span class="mi">2</span>
</code></pre></div></div><p>First pattern didn’t match to the array <code class="highlighter-rouge">[1, 2]</code>, so we went to second one where a match was found. We also get assignment <code class="highlighter-rouge">a = 2</code>.</p><p>If you don’t know the size of your array or you just want to take a part of your array, you can always use <strong>splat operator</strong> to do that.</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">case</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="k">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="o">*</span><span class="n">a</span><span class="p">]</span>
<span class="k">end</span>
 <span class="o">=&gt;</span> <span class="kp">nil</span>

<span class="n">irb</span><span class="o">&gt;</span> <span class="n">a</span>
 <span class="o">=&gt;</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
</code></pre></div></div><p>Remember what is the difference between normal variable <code class="highlighter-rouge">a</code> and splat operator <code class="highlighter-rouge">*a</code>:</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># normal variable</span>
<span class="k">case</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="k">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="k">end</span>
 <span class="o">=&gt;</span> <span class="kp">nil</span>

<span class="n">irb</span><span class="o">&gt;</span> <span class="n">a</span>
 <span class="o">=&gt;</span> <span class="mi">2</span>

<span class="c1"># splat operator</span>
<span class="k">case</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="k">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="o">*</span><span class="n">a</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="k">end</span>
 <span class="o">=&gt;</span> <span class="kp">nil</span>

<span class="n">irb</span><span class="o">&gt;</span> <span class="n">a</span>
 <span class="o">=&gt;</span> <span class="p">[</span><span class="mi">2</span><span class="p">]</span>
</code></pre></div></div><p>Splat operator will always return to you an array. You can use <code class="highlighter-rouge">_</code> to skip some values in your pattern:</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">case</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="k">in</span> <span class="p">[</span><span class="n">_</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="k">end</span>
 <span class="o">=&gt;</span> <span class="kp">nil</span>

<span class="n">irb</span><span class="o">&gt;</span> <span class="n">a</span>
 <span class="o">=&gt;</span> <span class="mi">2</span>
</code></pre></div></div><p>There is also a possibility to omit brackets too:</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">case</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="k">in</span> <span class="mi">1</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="mi">3</span>
<span class="k">end</span>
 <span class="o">=&gt;</span> <span class="kp">nil</span>

<span class="n">irb</span><span class="o">&gt;</span> <span class="n">a</span>
 <span class="o">=&gt;</span> <span class="mi">2</span>
</code></pre></div></div><p>Pattern matching can be useful for the complex structure of the Array object.</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">case</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]]</span>
<span class="k">in</span> <span class="p">[</span><span class="n">a</span><span class="p">,</span> <span class="p">[</span><span class="n">b</span><span class="p">,</span> <span class="o">*</span><span class="n">c</span><span class="p">]]</span>
<span class="k">end</span>
 <span class="o">=&gt;</span> <span class="kp">nil</span>

<span class="n">irb</span><span class="o">&gt;</span> <span class="n">a</span>
 <span class="o">=&gt;</span> <span class="mi">1</span>
<span class="n">irb</span><span class="o">&gt;</span> <span class="n">b</span>
 <span class="o">=&gt;</span> <span class="mi">2</span>
<span class="n">irb</span><span class="o">&gt;</span> <span class="n">c</span>
 <span class="o">=&gt;</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
</code></pre></div></div><h2 id="pattern-matching-in-hash">Pattern matching in Hash</h2><p>When we talk about pattern matching in Hash, you need to know that right now it will work only for <strong>Hashes where keys are symbols</strong>. It will not work for strings. You can find more about the reasons and problems related with string syntax for hashes in <a href="https://speakerdeck.com/k_tsj/pattern-matching-new-feature-in-ruby-2-dot-7" rel="nofollow" target="_blank">Kazuki Tsujimoto presenation</a> about <em>Pattern matching in Ruby</em>.</p><p>Let’s start with something simple:</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">case</span> <span class="p">{</span> <span class="ss">foo: </span><span class="mi">1</span><span class="p">,</span> <span class="ss">bar: </span><span class="mi">2</span> <span class="p">}</span>
<span class="k">in</span> <span class="p">{</span> <span class="ss">foo: </span><span class="mi">1</span><span class="p">,</span> <span class="ss">baz: </span><span class="mi">3</span> <span class="p">}</span>
  <span class="ss">:no_match</span>
<span class="k">in</span> <span class="p">{</span> <span class="ss">foo: </span><span class="mi">1</span><span class="p">,</span> <span class="ss">bar: </span><span class="n">b</span> <span class="p">}</span>
  <span class="ss">:match</span>
<span class="k">end</span>
 <span class="o">=&gt;</span> <span class="ss">:match</span>

<span class="n">irb</span><span class="o">&gt;</span> <span class="n">b</span>
 <span class="o">=&gt;</span> <span class="mi">2</span>
</code></pre></div></div><p>As in Array you can use splat operator, in Hash you can use <strong>double splat operator</strong>. It will behave similar to splat operator in Arrays.</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">case</span> <span class="p">{</span> <span class="ss">foo: </span><span class="mi">1</span><span class="p">,</span> <span class="ss">bar: </span><span class="mi">2</span><span class="p">,</span> <span class="ss">baz: </span><span class="mi">3</span> <span class="p">}</span>
<span class="k">in</span> <span class="p">{</span> <span class="ss">foo: </span><span class="mi">1</span><span class="p">,</span> <span class="o">**</span><span class="n">rest</span> <span class="p">}</span>
<span class="k">end</span>
 <span class="o">=&gt;</span> <span class="kp">nil</span>

<span class="n">irb</span><span class="o">&gt;</span> <span class="n">rest</span>
 <span class="o">=&gt;</span> <span class="p">{</span><span class="ss">:bar</span><span class="o">=&gt;</span><span class="mi">2</span><span class="p">,</span> <span class="ss">:baz</span><span class="o">=&gt;</span><span class="mi">3</span><span class="p">}</span>
</code></pre></div></div><p>The same like for arrays, you can omit brackets:</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">case</span> <span class="p">{</span> <span class="ss">foo: </span><span class="mi">1</span><span class="p">,</span> <span class="ss">bar: </span><span class="mi">2</span> <span class="p">}</span>
<span class="k">in</span> <span class="ss">foo: </span><span class="n">foo</span><span class="p">,</span> <span class="ss">bar: </span><span class="n">bar</span>
<span class="k">end</span>
 <span class="o">=&gt;</span> <span class="kp">nil</span>

<span class="n">irb</span><span class="o">&gt;</span> <span class="n">foo</span>
 <span class="o">=&gt;</span> <span class="mi">1</span>
<span class="n">irb</span><span class="o">&gt;</span> <span class="n">bar</span>
 <span class="o">=&gt;</span> <span class="mi">2</span>
</code></pre></div></div><p>Thanks for syntactic sugar, you can omit also variable and stay only with the symbol:</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">case</span> <span class="p">{</span> <span class="ss">foo: </span><span class="mi">1</span><span class="p">,</span> <span class="ss">bar: </span><span class="mi">2</span> <span class="p">}</span>
<span class="k">in</span> <span class="n">foo</span><span class="p">:,</span> <span class="ss">bar:
</span><span class="k">end</span>
 <span class="o">=&gt;</span> <span class="kp">nil</span>

<span class="n">irb</span><span class="o">&gt;</span> <span class="n">foo</span>
 <span class="o">=&gt;</span> <span class="mi">1</span>
<span class="n">irb</span><span class="o">&gt;</span> <span class="n">bar</span>
 <span class="o">=&gt;</span> <span class="mi">2</span>
</code></pre></div></div><p>I would like to mention one more thing here. <strong>Exact matching</strong> for arrays will behave different then in hashes. In case of array we will get <code class="highlighter-rouge">NoMatchingPatternError</code> exception in the example below:</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">case</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="k">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span>
  <span class="ss">:no_match</span>
<span class="k">end</span>

<span class="no">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
        <span class="mi">4</span><span class="p">:</span> <span class="n">from</span> <span class="sr">/home/</span><span class="n">agnieszka</span><span class="o">/</span><span class="p">.</span><span class="nf">rvm</span><span class="o">/</span><span class="n">rubies</span><span class="o">/</span><span class="n">ruby</span><span class="o">-</span><span class="mf">2.7</span><span class="o">.</span><span class="mi">0</span><span class="o">-</span><span class="n">preview1</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">irb</span><span class="p">:</span><span class="mi">23</span><span class="ss">:in</span> <span class="sb">`&lt;main&gt;'
        3: from /home/agnieszka/.rvm/rubies/ruby-2.7.0-preview1/bin/irb:23:in `</span><span class="nb">load</span><span class="s1">'
        2: from /home/agnieszka/.rvm/rubies/ruby-2.7.0-preview1/lib/ruby/gems/2.7.0/gems/irb-1.0.0/exe/irb:11:in `&lt;top (required)&gt;'</span>
        <span class="mi">1</span><span class="p">:</span> <span class="n">from</span> <span class="p">(</span><span class="n">irb</span><span class="p">):</span><span class="mi">33</span>
<span class="no">NoMatchingPatternError</span> <span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
</code></pre></div></div><p>This is complete opposite, then Hash behavior:</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">case</span> <span class="p">{</span> <span class="ss">foo: </span><span class="mi">1</span><span class="p">,</span> <span class="ss">bar: </span><span class="mi">2</span> <span class="p">}</span>
<span class="k">in</span> <span class="ss">foo:
  :match</span>
<span class="k">end</span>
 <span class="o">=&gt;</span> <span class="ss">:match</span>

<span class="n">irb</span><span class="o">&gt;</span> <span class="n">foo</span>
 <span class="o">=&gt;</span> <span class="mi">1</span>
</code></pre></div></div><p>It can be confusing at the beginning, but I see that during my tests of Ruby pattern matching I used that quite often in my code. In case that this will change in the future, I can get used to this syntax too:</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">case</span> <span class="p">{</span> <span class="ss">foo: </span><span class="mi">1</span><span class="p">,</span> <span class="ss">bar: </span><span class="mi">2</span> <span class="p">}</span>
<span class="k">in</span> <span class="n">foo</span><span class="p">:,</span> <span class="o">**</span><span class="n">_</span>
<span class="k">end</span>
</code></pre></div></div><p>To achieve the same behavior in Hash like for Arrays, you need to do something like that:</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">case</span> <span class="p">{</span> <span class="ss">foo: </span><span class="mi">1</span><span class="p">,</span> <span class="ss">bar: </span><span class="mi">2</span> <span class="p">}</span>
<span class="k">in</span> <span class="n">foo</span><span class="p">:,</span> <span class="o">**</span><span class="n">rest</span> <span class="k">if</span> <span class="n">rest</span><span class="p">.</span><span class="nf">empty?</span>
  <span class="ss">:no_match</span>
<span class="k">end</span>

<span class="no">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
        <span class="mi">4</span><span class="p">:</span> <span class="n">from</span> <span class="sr">/home/</span><span class="n">agnieszka</span><span class="o">/</span><span class="p">.</span><span class="nf">rvm</span><span class="o">/</span><span class="n">rubies</span><span class="o">/</span><span class="n">ruby</span><span class="o">-</span><span class="mf">2.7</span><span class="o">.</span><span class="mi">0</span><span class="o">-</span><span class="n">preview1</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">irb</span><span class="p">:</span><span class="mi">23</span><span class="ss">:in</span> <span class="sb">`&lt;main&gt;'
        3: from /home/agnieszka/.rvm/rubies/ruby-2.7.0-preview1/bin/irb:23:in `</span><span class="nb">load</span><span class="s1">'
        2: from /home/agnieszka/.rvm/rubies/ruby-2.7.0-preview1/lib/ruby/gems/2.7.0/gems/irb-1.0.0/exe/irb:11:in `&lt;top (required)&gt;'</span>
        <span class="mi">1</span><span class="p">:</span> <span class="n">from</span> <span class="p">(</span><span class="n">irb</span><span class="p">):</span><span class="mi">37</span>
<span class="no">NoMatchingPatternError</span> <span class="p">({</span><span class="ss">:foo</span><span class="o">=&gt;</span><span class="mi">1</span><span class="p">,</span> <span class="ss">:bar</span><span class="o">=&gt;</span><span class="mi">2</span><span class="p">})</span>
</code></pre></div></div><p>It’s important to know about this behavior, because it can surprise us in some cases:</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">case</span> <span class="p">{</span> <span class="ss">foo: </span><span class="mi">1</span><span class="p">,</span> <span class="ss">bar: </span><span class="mi">2</span> <span class="p">}</span>
<span class="k">in</span> <span class="p">{</span> <span class="ss">foo: </span><span class="mi">1</span> <span class="p">}</span>
  <span class="ss">:it_will_match_here</span>
<span class="k">in</span> <span class="p">{</span> <span class="ss">foo: </span><span class="mi">1</span><span class="p">,</span> <span class="ss">bar: </span><span class="n">b</span> <span class="p">}</span>
  <span class="ss">:no_match</span>
<span class="k">end</span>
 <span class="o">=&gt;</span> <span class="ss">:it_will_match_here</span>
</code></pre></div></div><p>We could expect to match to second pattern, but in this example we match to first one.</p><h2 id="guards-in-pattern-matching">Guards in pattern matching</h2><p>I have already shown that to you in one of the previous examples. You can use <strong>guard condition</strong> in pattern matching too.</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">case</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="k">in</span> <span class="p">[</span><span class="n">a</span><span class="p">,</span> <span class="o">*</span><span class="n">c</span><span class="p">]</span> <span class="k">if</span> <span class="n">a</span> <span class="o">!=</span> <span class="mi">1</span>
  <span class="ss">:no_match</span>
<span class="k">in</span> <span class="p">[</span><span class="n">a</span><span class="p">,</span> <span class="o">*</span><span class="n">c</span><span class="p">]</span> <span class="k">if</span> <span class="n">a</span> <span class="o">==</span> <span class="mi">1</span>
  <span class="ss">:match</span>
<span class="k">end</span>
 <span class="o">=&gt;</span> <span class="ss">:match</span>

<span class="n">irb</span><span class="o">&gt;</span> <span class="n">a</span>
 <span class="o">=&gt;</span> <span class="mi">1</span>
<span class="n">irb</span><span class="o">&gt;</span> <span class="n">c</span>
 <span class="o">=&gt;</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
</code></pre></div></div><h2 id="what-can-we-use-in-pattern-matching">What can we use in pattern matching?</h2><h4 id="literals">Literals</h4><p>In Ruby pattern matching you can use literals: Booleans, <code class="highlighter-rouge">nil</code>, Numbers, Strings, Symbols, Arrays, Hashes, Ranges, Regular Expressions, Procs.</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">case</span> <span class="mi">2</span>
<span class="k">in</span> <span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="mi">3</span><span class="p">)</span>
  <span class="ss">:match</span>
<span class="k">in</span> <span class="no">Integer</span>
  <span class="ss">:too_late_for_match</span>
<span class="k">end</span>
 <span class="o">=&gt;</span> <span class="ss">:match</span>
</code></pre></div></div><h4 id="variables">Variables</h4><p>We can also use variables which we already saw in the previous examples. The only thing which I would like to add is that we always do assignment in this case:</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">irb</span><span class="o">&gt;</span> <span class="n">array</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
 <span class="o">=&gt;</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>

<span class="k">case</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="k">in</span> <span class="n">array</span>
  <span class="ss">:match</span>
<span class="k">end</span>

<span class="n">irb</span><span class="o">&gt;</span> <span class="n">array</span>
 <span class="o">=&gt;</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
</code></pre></div></div><p>In case we want to compare what we have in our variable with an expression, we need to use <code class="highlighter-rouge">^</code>:</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">irb</span><span class="o">&gt;</span> <span class="n">array</span>
 <span class="o">=&gt;</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>

<span class="k">case</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="k">in</span> <span class="o">^</span><span class="n">array</span>
  <span class="ss">:no_match</span>
<span class="k">else</span>
  <span class="ss">:match</span>
<span class="k">end</span>

<span class="n">irb</span><span class="o">&gt;</span> <span class="n">array</span>
 <span class="o">=&gt;</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
</code></pre></div></div><h4 id="alternative-pattern">Alternative pattern</h4><p>The next thing which we can use is <strong>alternative pattern</strong></p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">case</span> <span class="mi">5</span>
<span class="k">in</span> <span class="mi">6</span>
  <span class="ss">:no_match</span>
<span class="k">in</span> <span class="mi">2</span> <span class="o">|</span> <span class="mi">3</span> <span class="o">|</span> <span class="mi">5</span>
  <span class="ss">:match</span>
<span class="k">end</span>
 <span class="o">=&gt;</span> <span class="ss">:match</span>
</code></pre></div></div><h4 id="as-pattern">As pattern</h4><p>We can also bind the variable to a value using <strong>as pattern</strong>. It can be useful when we need more complex assignments.</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">case</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]]</span>
<span class="k">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="n">b</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="n">a</span><span class="p">]</span>
<span class="k">end</span>
<span class="o">=&gt;</span> <span class="kp">nil</span>

<span class="n">irb</span><span class="o">&gt;</span> <span class="n">a</span>
 <span class="o">=&gt;</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="n">irb</span><span class="o">&gt;</span> <span class="n">b</span>
 <span class="o">=&gt;</span> <span class="mi">4</span>
</code></pre></div></div><h2 id="pattern-matching-for-others-objects">Pattern matching for others objects</h2><p>For now there is only few Ruby object which we can use pattern matching for. We saw that for Array and Hash. We can also do that for Struct.</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">Point</span> <span class="o">=</span> <span class="no">Struct</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="ss">:latitude</span><span class="p">,</span> <span class="ss">:longitude</span><span class="p">)</span>
<span class="n">point</span> <span class="o">=</span> <span class="no">Point</span><span class="p">[</span><span class="mf">50.29543618146685</span><span class="p">,</span> <span class="mf">18.666200637817383</span><span class="p">]</span>

<span class="k">case</span> <span class="n">point</span>
<span class="k">in</span> <span class="n">latitude</span><span class="p">,</span> <span class="n">longitude</span>
<span class="k">end</span>
 <span class="o">=&gt;</span> <span class="kp">nil</span>

<span class="n">irb</span><span class="o">&gt;</span> <span class="n">latitude</span>
 <span class="o">=&gt;</span> <span class="mf">50.29543618146685</span>
<span class="n">irb</span><span class="o">&gt;</span> <span class="n">longitude</span>
 <span class="o">=&gt;</span> <span class="mf">18.666200637817383</span>
</code></pre></div></div><p>If you want to use pattern matching for another object, you need to add method <code class="highlighter-rouge">deconstruct</code> or <code class="highlighter-rouge">deconstruct_keys</code> to your class. Depends on what method you choose, your object will behave during pattern matching like <code class="highlighter-rouge">Array</code> or like <code class="highlighter-rouge">Hash</code>. In the example above, we see that <code class="highlighter-rouge">Struct</code> behave like <code class="highlighter-rouge">Array</code> when it comes to pattern matching. I have added a very simple use case for <code class="highlighter-rouge">Hash</code> type of pattern matching below:</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Date</span>
  <span class="k">def</span> <span class="nf">deconstruct_keys</span><span class="p">(</span><span class="n">keys</span><span class="p">)</span>
    <span class="p">{</span> <span class="ss">year: </span><span class="n">year</span><span class="p">,</span> <span class="ss">month: </span><span class="n">month</span><span class="p">,</span> <span class="ss">day: </span><span class="n">day</span> <span class="p">}</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="n">date</span> <span class="o">=</span> <span class="no">Date</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="mi">2019</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">21</span><span class="p">)</span>

<span class="k">case</span> <span class="n">date</span>
<span class="k">in</span> <span class="ss">year:
</span><span class="k">end</span>
 <span class="o">=&gt;</span> <span class="kp">nil</span>

<span class="n">irb</span><span class="o">&gt;</span> <span class="n">year</span>
 <span class="o">=&gt;</span> <span class="mi">2019</span>
</code></pre></div></div><h2 id="handle-json-data">Handle JSON data</h2><p>I think the best place to use it is in JSON data. You can skip conditions and just use pattern matching.</p><div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FeatureCollection"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"features"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Feature"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
      </span><span class="nl">"geometry"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Point"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"coordinates"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="mf">18.666200637817383</span><span class="p">,</span><span class="w">
          </span><span class="mf">50.29543618146685</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div><p>JSON with pattern matching:</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">case</span> <span class="no">JSON</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="n">json</span><span class="p">,</span> <span class="ss">symbolize_names: </span><span class="kp">true</span><span class="p">)</span>
<span class="k">in</span> <span class="p">{</span> <span class="ss">type: </span><span class="s2">"FeatureCollection"</span><span class="p">,</span> <span class="ss">features: </span><span class="p">[{</span><span class="ss">type: </span><span class="s2">"Feature"</span><span class="p">,</span> <span class="ss">geometry: </span><span class="p">{</span> <span class="ss">type: </span><span class="s2">"Point"</span><span class="p">,</span> <span class="ss">coordinates: </span><span class="p">[</span><span class="n">longitude</span><span class="p">,</span> <span class="n">latitude</span><span class="p">]}}]}</span>
<span class="k">end</span>

<span class="n">irb</span><span class="o">&gt;</span> <span class="n">longitude</span>
 <span class="o">=&gt;</span> <span class="mf">18.666200637817383</span>
<span class="n">irb</span><span class="o">&gt;</span> <span class="n">latitude</span>
 <span class="o">=&gt;</span> <span class="mf">50.29543618146685</span>
</code></pre></div></div><p>JSON with <code class="highlighter-rouge">if</code> statements:</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">point</span> <span class="o">=</span> <span class="no">JSON</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="n">json</span><span class="p">,</span> <span class="ss">symbolize_names: </span><span class="kp">true</span><span class="p">)</span>
<span class="k">if</span> <span class="n">point</span><span class="p">[</span><span class="ss">:type</span><span class="p">]</span> <span class="o">==</span> <span class="s2">"FeatureCollection"</span>
  <span class="n">features</span> <span class="o">=</span> <span class="n">point</span><span class="p">[</span><span class="ss">:features</span><span class="p">]</span>
  <span class="k">if</span> <span class="n">features</span><span class="p">.</span><span class="nf">size</span> <span class="o">==</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="n">features</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="ss">:type</span><span class="p">]</span> <span class="o">==</span> <span class="s2">"Feature"</span>
    <span class="n">geometry</span> <span class="o">=</span> <span class="n">features</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="ss">:geometry</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">geometry</span><span class="p">[</span><span class="ss">:type</span><span class="p">]</span> <span class="o">==</span> <span class="s2">"Point"</span> <span class="o">&amp;&amp;</span> <span class="n">geometry</span><span class="p">[</span><span class="s2">"coordinates"</span><span class="p">].</span><span class="nf">size</span> <span class="o">==</span> <span class="mi">2</span>
      <span class="n">longitude</span><span class="p">,</span> <span class="n">latitude</span> <span class="o">=</span> <span class="n">geometry</span><span class="p">[</span><span class="s2">"coordinates"</span><span class="p">]</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="n">irb</span><span class="o">&gt;</span> <span class="n">longitude</span>
 <span class="o">=&gt;</span> <span class="mf">18.666200637817383</span>
<span class="n">irb</span><span class="o">&gt;</span> <span class="n">latitude</span>
 <span class="o">=&gt;</span> <span class="mf">50.29543618146685</span>
</code></pre></div></div><p>You can see the difference.</p><h2 id="scope-strange-behavior">Scope strange behavior</h2><p>Right now you can see the value of the variable even match of pattern failed. This is something Ruby core knows about and they will change that in future.</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">case</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="k">in</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="k">if</span> <span class="n">y</span> <span class="o">&gt;</span> <span class="mi">3</span>
  <span class="ss">:no_match</span>
<span class="k">in</span> <span class="n">x</span><span class="p">,</span> <span class="n">z</span> <span class="k">if</span> <span class="n">z</span> <span class="o">&lt;</span> <span class="mi">3</span>
  <span class="ss">:match</span>
<span class="k">end</span>
 <span class="o">=&gt;</span> <span class="ss">:match</span>

<span class="n">irb</span><span class="o">&gt;</span> <span class="n">x</span>
 <span class="o">=&gt;</span> <span class="mi">1</span>
<span class="n">irb</span><span class="o">&gt;</span> <span class="n">z</span>
 <span class="o">=&gt;</span> <span class="mi">2</span>

<span class="c1"># unexpected assignment for y when pattern matching failed</span>
<span class="n">irb</span><span class="o">&gt;</span> <span class="n">y</span>
 <span class="o">=&gt;</span> <span class="mi">2</span>
</code></pre></div></div><h2 id="what-i-would-like-to-see-more">What I would like to see more?</h2><p>When I play around pattern matching in Ruby, I found some cases which are not a part of this new feature, but it will be nice to have:</p><ul><li>one line pattern matching - We have one line <code class="highlighter-rouge">each</code>, so it will be good to have one line pattern matching. Something like <code class="highlighter-rouge">case [1, 2, [3, 4]] { [1, 2, [3, b] =&gt; a] }</code> just for assignments.</li><li>calculations in patterns - Sometimes we would like to do some quick calculations like <code class="highlighter-rouge">in (1..3).to_a</code> in pattern, but this is not possible. We can do some work around and assign this to variable <code class="highlighter-rouge">array = (1..3).to_a</code> then use <code class="highlighter-rouge">array</code> in pattern <code class="highlighter-rouge">in ^array</code>.</li><li>allowed variables in alternative pattern - It will be great to be able to do <code class="highlighter-rouge">[1, 2] | [1, 2, c]</code>.</li></ul><p>I know that some of my ideas could be not possible or hard to do, but this is my wish list. ;]</p><h2 id="summary">Summary</h2><p>I’m really happy with this new feature. I know that this is not production ready, but it was nice to play around it. I hope it will be stable soon and it will have even more nice patterns. I think this is a good way to do Ruby even more readable.</p><p>What do you think about Ruby pattern matching? Let me know in the comments below.</p><br><div class='entry-tags text-center'> <span class='svg--tags'><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 230 230"><path d="M95.084 0H.13v95.475L134.658 230l95.212-95.212L95.084 0zM61.138 61.268c-6.988 6.989-18.321 6.989-25.309 0-6.989-6.987-6.99-18.321 0-25.308 6.987-6.99 18.321-6.989 25.309 0 6.989 6.987 6.989 18.321 0 25.308z"/></svg></span> Tagged with <a href="/tags/#Ruby" data-toggle='tooltip' title='Posts tagged with Ruby' rel='tag'>Ruby</a></div></div></article></div><footer class='post-footer entry-meta'><div class='post-share text-center'><p class='light small'> Share this post</p><ul class='social-mini'><li> <a data-toggle='tooltip' href="https://twitter.com/intent/tweet?text=&quot;Ruby pattern matching&quot;%20https://womanonrails.com/ruby-pattern-matching%20via%20&#64;womanonrails" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;" title='Share on Twitter'> <span class='svg--twitter'><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg></span> </a></li><li> <a data-toggle='tooltip' href='https://www.facebook.com/sharer/sharer.php?u=https://womanonrails.com/ruby-pattern-matching' onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;" title='Share on Facebook'> <span class='svg--facebook'><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 264 512"><path d="M76.7 512V283H0v-91h76.7v-71.7C76.7 42.4 124.3 0 193.8 0c33.3 0 61.9 2.5 70.2 3.6V85h-48.2c-37.8 0-45.1 18-45.1 44.3V192H256l-11.7 91h-73.6v229"/></svg></span> </a></li></ul></div><div class="post-author text-center"> <img src="https://womanonrails.com/images/womanonrails-square.svg" alt="Agnieszka Małaszkiewicz's photo" itemprop="image" class="post-avatar img-circle img-responsive"/><h4 class="bordered-bottom vcard author" itemprop="author" itemscope itemtype="https://schema.org/Person">By <span itemprop="name" class="fn"><a href="https://womanonrails.com/about" title="About Agnieszka Małaszkiewicz" itemprop="url">Agnieszka Małaszkiewicz</a></span></h4><p>Woman, programmer, mentor, speaker, photographer and dancer with passion.</p></div></footer></div></div><footer id='footer' class='blog-background overlay text-center align-middle animated from-top'><div class='inner'><div class='container'><ul class='social-icons'><li> <a href='https://twitter.com/womanonrails' rel='nofollow noopener noreferrer' target='_blank'> <span class='svg--twitter'><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg></span> </a></li><li> <a href='https://facebook.com/womanonrails' rel='nofollow noopener noreferrer' target='_blank'> <span class='svg--facebook'><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 264 512"><path d="M76.7 512V283H0v-91h76.7v-71.7C76.7 42.4 124.3 0 193.8 0c33.3 0 61.9 2.5 70.2 3.6V85h-48.2c-37.8 0-45.1 18-45.1 44.3V192H256l-11.7 91h-73.6v229"/></svg></span> </a></li><li> <a href='https://stackoverflow.com/users/2885676/womanonrails' rel='nofollow noopener noreferrer' target='_blank'> <span class='svg--stackoverflow'><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path d="M293.7 300l-181.2-84.5 16.7-36.5 181.3 84.7-16.8 36.3zm48-76L188.2 95.7l-25.5 30.8 153.5 128.3 25.5-30.8zm39.6-31.7L262 32l-32 24 119.3 160.3 32-24zM290.7 311L95 269.7 86.8 309l195.7 41 8.2-39zm31.6 129H42.7V320h-40v160h359.5V320h-40v120zm-39.8-80h-200v39.7h200V360z"/></svg></span> </a></li><li> <a href='https://linkedin.com/in/womanonrails' rel='nofollow noopener noreferrer' target='_blank'> <span class='svg--linkedin'><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M100.3 480H7.4V180.9h92.9V480zM53.8 140.1C24.1 140.1 0 115.5 0 85.8 0 56.1 24.1 32 53.8 32c29.7 0 53.8 24.1 53.8 53.8 0 29.7-24.1 54.3-53.8 54.3zM448 480h-92.7V334.4c0-34.7-.7-79.2-48.3-79.2-48.3 0-55.7 37.7-55.7 76.7V480h-92.8V180.9h89.1v40.8h1.3c12.4-23.5 42.7-48.3 87.9-48.3 94 0 111.3 61.9 111.3 142.3V480z"/></svg></span> </a></li><li> <a href='https://instagram.com/womanonrails' rel='nofollow noopener noreferrer' target='_blank'> <span class='svg--linkedin'><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"/></svg></span> </a></li><li> <a href='https://github.com/womanonrails' rel='nofollow noopener noreferrer' target='_blank'> <span class='svg--github'><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 399.378c0 2.052-2.3 3.693-5.2 3.693-3.3.307-5.6-1.334-5.6-3.693 0-2.05 2.3-3.692 5.2-3.692 3-.307 5.6 1.334 5.6 3.692zm-31.1-4.615c-.7 2.051 1.3 4.41 4.3 5.026 2.6 1.025 5.6 0 6.2-2.052.6-2.05-1.3-4.41-4.3-5.333-2.6-.718-5.5.308-6.2 2.36zm44.2-1.743c-2.9.718-4.9 2.666-4.6 5.025.3 2.051 2.9 3.385 5.9 2.667 2.9-.718 4.9-2.667 4.6-4.718-.3-1.949-3-3.282-5.9-2.974zM244.8 0C106.1 0 0 107.998 0 250.253c0 113.741 69.8 211.073 169.5 245.33 12.8 2.358 17.3-5.744 17.3-12.411 0-6.359-.3-41.435-.3-62.973 0 0-70 15.384-84.7-30.564 0 0-11.4-29.846-27.8-37.538 0 0-22.9-16.102 1.6-15.794 0 0 24.9 2.05 38.6 26.46 21.9 39.59 58.6 28.205 72.9 21.436 2.3-16.41 8.8-27.794 16-34.563-55.9-6.36-112.3-14.667-112.3-113.332 0-28.205 7.6-42.358 23.6-60.41-2.6-6.666-11.1-34.153 2.6-69.64 20.9-6.666 69 27.693 69 27.693 20-5.744 41.5-8.718 62.8-8.718 21.3 0 42.8 2.974 62.8 8.718 0 0 48.1-34.461 69-27.692 13.7 35.589 5.2 62.973 2.6 69.64 16 18.153 25.8 32.307 25.8 60.409 0 98.973-58.9 106.87-114.8 113.332 9.2 8.102 17 23.486 17 47.589 0 34.563-.3 77.332-.3 85.742 0 6.666 4.6 14.769 17.3 12.41 100-34.05 167.8-131.383 167.8-245.124C496 107.998 383.5 0 244.8 0zM97.2 353.738c-1.3 1.026-1 3.385.7 5.333 1.6 1.641 3.9 2.36 5.2 1.026 1.3-1.026 1-3.385-.7-5.333-1.6-1.641-3.9-2.36-5.2-1.026zm-10.8-8.307c-.7 1.333.3 2.974 2.3 4 1.6 1.025 3.6.717 4.3-.718.7-1.334-.3-2.975-2.3-4-2-.616-3.6-.308-4.3.718zm32.4 36.512c-1.6 1.333-1 4.41 1.3 6.359 2.3 2.359 5.2 2.666 6.5 1.025 1.3-1.333.7-4.41-1.3-6.359-2.2-2.358-5.2-2.666-6.5-1.025zm-11.4-15.077c-1.6 1.026-1.6 3.692 0 6.051 1.6 2.36 4.3 3.385 5.6 2.36 1.6-1.334 1.6-4 0-6.36-1.4-2.359-4-3.384-5.6-2.05z"/></svg></span> </a></li></ul><div> Agnieszka Małaszkiewicz &copy; 2021 &bull; All rights reserved.</div><ul class='menu-items'><li> <a href="/"> <span class='svg--home'><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M16 256L256 64l96 72v-32h48v72l96 80h-48v192H328V288h-96v160H64V256z"/></svg></span> </a>&bull;</li><li> <a href="/workshops"> Programming courses </a>&bull;</li><li> <a href="/categories"> Categories </a>&bull;</li><li> <a href="/tags"> Tags </a>&bull;</li><li> <a href="/about"> About </a>&bull;</li><li> <a href="/feed.xml" title='Atom/RSS feed'> <span class='svg--rss'><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>RSS icon</title><path d="M19.199 24C19.199 13.467 10.533 4.8 0 4.8V0c13.165 0 24 10.835 24 24h-4.801zM3.291 17.415c1.814 0 3.293 1.479 3.293 3.295 0 1.813-1.485 3.29-3.301 3.29C1.47 24 0 22.526 0 20.71s1.475-3.294 3.291-3.295zM15.909 24h-4.665c0-6.169-5.075-11.245-11.244-11.245V8.09c8.727 0 15.909 7.184 15.909 15.91z"/></svg></span> Feed </a></li></ul></div><div> <a class='btn btn-default' href='https://paypal.me/womanonrails' target='_blank' rel='nofollow noopener' style='border-radius: 10px !important;'> <img alt='PayPal' height='20' src='/images/donations/paypal.svg'> </a> <a href='https://ko-fi.com/womanonrails' target='_blank' rel='nofollow noopener'> <img alt='Ko-fi' height='34' src='/images/donations/ko-fi.svg'> </a></div></div><div class="decor-wrapper"> <svg id="footer-decor" class="decor top" xmlns="https://www.w3.org/2000/svg" version="1.1" viewBox="0 0 100 100" preserveAspectRatio="none"><path class="large left" d="M0 0 L50 50 L0 100" fill="rgba(255,255,255, .1)"></path><path class="large right" d="M100 0 L50 50 L100 100" fill="rgba(255,255,255, .1)"></path><path class="medium left" d="M0 0 L50 50 L0 66.6" fill="rgba(255,255,255, .3)"></path><path class="medium right" d="M100 0 L50 50 L100 66.6" fill="rgba(255,255,255, .3)"></path><path class="small left" d="M0 0 L50 50 L0 33.3" fill="rgba(255,255,255, .5)"></path><path class="small right" d="M100 0 L50 50 L100 33.3" fill="rgba(255,255,255, .5)"></path><path d="M0 0 L50 50 L100 0 L0 0" fill="rgba(255,255,255, 1)"></path><path d="M48 48 L50 51 L52 48 L48 48" fill="rgba(255,255,255, 1)"></path> </svg></div></footer><script async src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> <script>window.jQuery || document.write('<script src="https://womanonrails.com/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script> <script src="https://womanonrails.com/assets/js/scripts.min.js"></script> <script type="text/javascript" src="https://womanonrails.com/assets/js/waypoints.min.js"></script> <script type="text/javascript" src="https://womanonrails.com/assets/js/script.js"></script> <script type='text/javascript'>$(document).ready(function(){$(".time").text(function(a,b){return Math.round(parseFloat(b))})});</script> <script type="text/javascript"> /* Slides */ $("a#slide").click(function(){ $("#sidebar,body,a#slide,#fade").addClass("slide") }); $("#fade,#header,#posts-container").click(function(){ $("#sidebar,body,a#slide,#fade").removeClass("slide") }); $("a#click-filter").click(function(){ $("#slide-filter").slideToggle("medium"); $("#slide-pages").slideOut("medium"); }); $("a#click-pages").click(function(){ $("#slide-pages").slideToggle("medium"); $("#slide-filter").slideOut("medium"); }); /* End-Slides */ </script> <script> $(document).ready(function() { $('.search-field').simpleJekyllSearch({ jsonFile : '/search.json', searchResults : '.search-results', template : '<li><article><a href="{url}">{title} <span class="entry-date"><time datetime="{date}">{shortdate}</time></span></a></article></li>', noResults: '<p>Nothing found.</p>' }); }); (function( $, window, undefined ) { var bs = { close: $(".js-remove-sign"), searchform: $(".search-form"), canvas: $("body"), dothis: $('.dosearch') }; bs.dothis.on('click', function() { $('.search-wrapper').css({ display: "block" }); bs.searchform.toggleClass('active'); bs.searchform.find('input').focus(); bs.canvas.toggleClass('search-overlay'); }); bs.close.on('click', function() { $('.search-wrapper').removeAttr( 'style' ); bs.searchform.toggleClass('active'); bs.canvas.removeClass('search-overlay'); }); })( jQuery, window ); </script> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-127731573-1"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-127731573-1'); </script></body></html>
