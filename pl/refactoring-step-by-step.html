<!DOCTYPE html><html lang="pl"><head><meta charset='utf-8'><title>Refaktoring w Ruby krok po kroku - część 1</title><meta name='description' content='Jak zrobić refaktoring? <br> Od kodu proceduralnego do zorientowanego obiektowo.'><meta name='viewport' content='width=device-width, initial-scale=1.0'><meta name="generator" content="Jekyll v4.0.1" /><meta property="og:title" content="Refaktoring w Ruby krok po kroku - część 1" /><meta name="author" content="womanonrails" /><meta property="og:locale" content="pl" /><meta name="description" content="Jak zrobić refaktoring? Od kodu proceduralnego do zorientowanego obiektowo." /><meta property="og:description" content="Jak zrobić refaktoring? Od kodu proceduralnego do zorientowanego obiektowo." /><link rel="canonical" href="https://womanonrails.com/pl/refactoring-step-by-step" /><meta property="og:url" content="https://womanonrails.com/pl/refactoring-step-by-step" /><meta property="og:site_name" content="Woman on Rails" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2018-10-08T00:00:00-04:00" /> <script type="application/ld+json"> {"description":"Jak zrobić refaktoring? Od kodu proceduralnego do zorientowanego obiektowo.","url":"https://womanonrails.com/pl/refactoring-step-by-step","@type":"BlogPosting","headline":"Refaktoring w Ruby krok po kroku - część 1","dateModified":"2018-10-08T00:00:00-04:00","datePublished":"2018-10-08T00:00:00-04:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://womanonrails.com/pl/refactoring-step-by-step"},"author":{"@type":"Person","name":"womanonrails"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://womanonrails.com/pl/womanonrails-square.svg"},"name":"womanonrails"},"@context":"https://schema.org"}</script><meta name='twitter:card' content='summary'><meta name='twitter:creator' content='@womanonrails'><meta name='twitter:description' content='Jak zrobić refaktoring? <br> Od kodu proceduralnego do zorientowanego obiektowo.'><meta name='twitter:image' content='https://womanonrails.com/images/womanonrails-square.svg'><meta name='twitter:title' content='Refaktoring w Ruby krok po kroku - część 1'><meta property='og:description' content='Jak zrobić refaktoring? <br> Od kodu proceduralnego do zorientowanego obiektowo.'><meta property='og:image' content='https://womanonrails.com/images/womanonrails-1000x1000.jpg'><meta property='og:title' content='Refaktoring w Ruby krok po kroku - część 1'><meta property='og:type' content='website'><link href='https://womanonrails.com/favicon.ico' rel='shortcut icon' type='image/x-icon' /><link href='https://womanonrails.com/favicon.png' rel='shortcut icon' type='image/png' /><link href='/pl/feed.xml' rel='alternate' title='Woman on Rails Feed' type='application/atom+xml' /><link async href='/assets/css/bootstrap.css' media='all' rel='stylesheet' /><link href='/assets/css/style.css' media='all' rel='stylesheet' /><link href='/css/main.css' media='all' rel='stylesheet' /><link href='/assets/css/applause-button.css' rel='stylesheet' /> <script defer src='/assets/js/applause-button.js'></script><div class="search-wrapper"><div class="search-form"> <input type="text" class="search-field" placeholder="Search..."> <span class='js-remove-sign'> <span class='svg--cancel'><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 375 375"><path d="M187.5 2.5a185 185 0 0 0-185 185 185 185 0 0 0 185 185 185 185 0 0 0 185-185 185 185 0 0 0-185-185zm-85.906 78.875a20.232 20.232 0 0 1 14.518 6.132l71.388 71.388 71.388-71.388a20.232 20.232 0 0 1 13.909-6.121 20.232 20.232 0 0 1 14.702 34.73l-71.39 71.388 71.39 71.39a20.232 20.232 0 1 1-28.61 28.61L187.5 216.115l-71.388 71.389a20.232 20.232 0 1 1-28.611-28.61l71.39-71.39-71.39-71.388a20.232 20.232 0 0 1 14.093-34.74z"/></svg></span> </span><ul class="search-results post-list"></ul></div></div></head><body class="post-template" itemscope itemtype="https://schema.org/WebPage"><div id="fade"></div><a id="slide" class="animated fade"></a><aside id="sidebar"><nav id="navigation"><h2>MENU</h2><hr><ul><li> <a href="https://womanonrails.com/">Strona główna</a></li><li> <a href="https://womanonrails.com/pl/workshops">Kursy programowania</a></li><li> <a href="https://womanonrails.com/pl/categories">Kategorie</a></li><li> <a href="https://womanonrails.com/pl/tags">Tagi</a></li><li> <a href="https://womanonrails.com/pl/about">O mnie</a></li><li> <a href="https://bemore.womanonrails.com/">Be more</a></li><li> <a href="/pl/feed.xml" title='Atom/RSS feed'> <span class='svg--rss'><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>RSS icon</title><path d="M19.199 24C19.199 13.467 10.533 4.8 0 4.8V0c13.165 0 24 10.835 24 24h-4.801zM3.291 17.415c1.814 0 3.293 1.479 3.293 3.295 0 1.813-1.485 3.29-3.301 3.29C1.47 24 0 22.526 0 20.71s1.475-3.294 3.291-3.295zM15.909 24h-4.665c0-6.169-5.075-11.245-11.244-11.245V8.09c8.727 0 15.909 7.184 15.909 15.91z"/></svg></span> Feed </a></li></ul></nav></aside><header class='blog-background overlay align-center align-middle animated from-bottom' id='masthead' itemscope itemtype='https://schema.org/Organization'> <button class='menu-button animated fade dosearch' title='Wyszukaj'> <span class='svg--search'><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 13"> <g stroke-width="1.5" fill="none"><path d="M11.29 11.71l-4-4"/><circle cx="5" cy="5" r="4"/> </g> </svg></span> </button> <a href="/refactoring-step-by-step" class='language animated fade'> en </a><div class='inner'><div class='container'> <a class='brand' href='/pl/' itemprop='url' role='banner'> <img itemprop='logo' src="https://womanonrails.com/images/womanonrails-square.svg" alt="Woman on Rails Logo" width='120' /><h1 class='blog-title light' itemprop='name'> Woman on Rails</h1></a><h2 class='blog-description light bordered bordered-top' itemprop='description'> Premature optimization is the root of all evil.</h2></div></div><div class="decor-wrapper"> <svg id="header-decor" class="decor bottom" xmlns="https://www.w3.org/2000/svg" version="1.1" viewBox="0 0 100 100" preserveAspectRatio="none"><path class="large left" d="M0 0 L50 50 L0 100" fill="rgba(255,255,255, .1)"></path><path class="large right" d="M100 0 L50 50 L100 100" fill="rgba(255,255,255, .1)"></path><path class="medium left" d="M0 100 L50 50 L0 33.3" fill="rgba(255,255,255, .3)"></path><path class="medium right" d="M100 100 L50 50 L100 33.3" fill="rgba(255,255,255, .3)"></path><path class="small left" d="M0 100 L50 50 L0 66.6" fill="rgba(255,255,255, .5)"></path><path class="small right" d="M100 100 L50 50 L100 66.6" fill="rgba(255,255,255, .5)"></path><path d="M0 99.9 L50 49.9 L100 99.9 L0 99.9" fill="rgba(255,255,255, 1)"></path><path d="M48 52 L50 49 L52 52 L48 52" fill="rgba(255,255,255, 1)"></path> </svg></div></header><div class='content' id='main' itemprop='mainContentOfPage' itemscope itemtype='https://schema.org/WebPageElement' role='main'><div class='container'><div class='row'><div class='applause hidden-xs hidden-sm'> <applause-button color='#c33' multiclap='true' style='width: 58px; height: 58px;' url='https://womanonrails.com/pl/refactoring-step-by-step' /></div><article class='post col-md-8 col-md-offset-2 hentry' itemprop='blogPost' itemscope itemtype='https://schema.org/BlogPosting'><header class='post-header entry-header'><h1 class='post-title text-center hyper lighter bordered-bottom entry-title' itemprop='headline'> Refaktoring w Ruby krok po kroku - część 1</h1><div class='cursive'>Jak zrobić refaktoring? <br> Od kodu proceduralnego do zorientowanego obiektowo.</div><div class='post-info text-center small'> <span class='post-tags'> <a data-toggle='tooltip' href="/pl/categories/#refaktoring" title="Other posts from the Refaktoring category" rel="tag">Refaktoring</a> </span> | <span class='post-tags reading-time'> <span class='time'>9</span> min. </span></div></header><div class='post-body bordered-bottom' itemprop='description'><p>Dużo czasu minęło od mojego ostatniego artykułu technicznego. Przez ten czas próbowałam wielu nowych rzeczy. Założyłam blog <a href="https://bemore.womanonrails.com/" title="Be More - moje przemyślenia na temat życia" target="_blank">Be more</a>, który dotyczy moich przemyśleń na temat życia, <a href="https://www.youtube.com/channel/UCudKRFuddrf8saaxUEoo0xQ" title="Woman on Rails - kanał YouTube" target="_blank" rel="nofollow noopener noreferrer">Kanał Woman on Rails na YouTube</a> i <a href="https://vimeo.com/womanonrails" title="Woman on Rails - kanał Vimeo" target="_blank" rel="nonofollow noopener noreferrer">podróżniczy kanał na Vimeo</a>. To był czas odkrywania, co sprawia mi przyjemność a co nie. Ale wracając do tematu. Do tego artykułu przygotowywałam się naprawdę długo. Może nawet za długo. Pomysł pojawił się już 2015 roku, a teraz możesz zobaczyć jego rezultaty. Zaczynajmy!</p><p>Refaktoring jest jednym z moich ulubionych tematów. Uwielbiam porządki w prawdziwym życiu, ale też w kodzie źródłowym. Pracowałam i nadal pracuję nad aplikacjami internetowymi. I wciąż poszukuje odpowiedzi na następujące pytania: Jak pisać dobry kod? Co powoduje, że po pewnym czasie nasz kod staje się brzydki i nieczytelny? Jak radzić sobie z rosnącą złożonością w projektach? Każdego dnia uczę się jak robić dobry refaktoring. Bazuję na zdobytym przeze mnie, jak i przez innych, doświadczeniu. Dziś chciałabym się podzielić z Tobą przykładem refaktoringu zrobionego krok po kroku.</p><p>Do tego celu wykorzystam kod, który został napisany dawno temu przez młodego programistę w <a href="https://fractalsoft.org/pl" title="Fractal Soft - Aplikacje internetowe w Ruby on Rails" target="_blank">mojej firmie</a>. Plan był następujący - ulepszyć ten kod źródłowy. W zasadzie cała logika to jedna klasa, którą możesz zobaczyć <a href="https://github.com/womanonrails/poker/blob/55c9ae0ab921f7aa95bb7e47676d87b970a32033/lib/poker/hand.rb" title="Kod przed refaktoringiem" target="_blank" rel="nofollow noopener noreferrer">tutaj</a>. W tej klasie znajdują się wszystkie zasady potrzebne do sprawdzenia tego, co mamy w ręce grając w pokera, ale bez użycia jokera. Kod nie jest zły. Kiedy znasz logikę biznesową (w tym przypadku zasady pokera), jesteś wstanie poruszać się po tym kodzie. Ten fragment kodu posiada też testy, co jest jego zaletą. Będzie nam o wiele łatwiej zmienić cokolwiek, gdy mamy testy pilnujące logiki. Jeżeli jednak nie cała logika jest przetestowana, to możemy zepsuć fragment funkcjonalności nie zdając sobie nawet z tego sprawy. Kod ten wygląda bardziej proceduralnie niż obiektowo i będę chciała się tym zająć w odpowiednim czasie. Posiada on też wiele powtórzeń. Czasami taki fragment kodu jest w zupełności wystarczający. Wszystko zależy od projektu i wymagań. Jeżeli kod został napisany raz, działa poprawnie i nikt do niego nie będzie musiał zaglądać, to może zostawienie go w takim stanie jest w jakiś sposób uzasadnione z biznesowego punktu widzenia. Natomiast jeżeli zdarzy się, że zmienią się wymagania, to prawdopodobnie kod źródłowy też ulegnie zmianie. To Ty musisz zdecydować, czy będziesz refaktoryzowała kod teraz czy później. Ja preferuje pierwszą opcję. Dopóki pamiętam logikę i zależności łatwiej jest mi kod zmienić. Po pewnym czasie trzeba najpierw jeszcze raz zrozumieć strukturę, zanim zacznie się coś modyfikować. No to zaczynamy!</p><h1 id="krok-1---przygotowanie-środowiska">Krok 1 - Przygotowanie środowiska</h1><p>Zaczęłam od zaktualizowania wszystkich gemów w projekcie oraz doinstalowania narzędzi takich jak Rubocop czy Reek. Są to <strong>metryki czyli pewnego rodzaju wskaźniki jakości kodu</strong>. Pomogą nam sprawdzić na czym stoimy i gdzie można zacząć robić porządki. Trzeba jednak pamiętać, że są to tylko narzędzia. A narzędzia mogą się mylić i można je łatwo oszukać. Ale to temat na osobny artykuł.</p><h2 id="statystyki-bazując-na-metrykach">Statystyki (bazując na metrykach):</h2><ul><li><strong>LOC</strong> (Line of code - liczba linii kodu) - 194</li><li><strong>LOT</strong> (Line of tests - liczba linii testów) - 168</li><li><strong>Flog</strong> - 112.8</li><li><strong>Flay</strong> - 123</li><li><strong>Testy</strong> - 12 examples, 0 failures (12 przypadków testowych, 0 nieprzechodzących)</li></ul><h1 id="krok-2---pierwsze-porządki">Krok 2 - Pierwsze porządki</h1><p>Bazując na testach i metrykach, nie wchodząc w głębsze zrozumienie logiki, zrobiłam pierwsze usprawnienia. Usunęłam niektóre warunki i uprościłam kod.</p><p>Kod przed zmianami:</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">straight_flush?</span><span class="p">(</span><span class="n">array</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">straight?</span><span class="p">(</span><span class="n">array</span><span class="p">)</span> <span class="n">and</span> <span class="n">flush?</span><span class="p">(</span><span class="n">array</span><span class="p">)</span>
    <span class="k">return</span> <span class="kp">true</span>
  <span class="k">else</span>
    <span class="k">return</span> <span class="kp">false</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div><p>Kod po zmianach:</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">straight_flush?</span><span class="p">(</span><span class="n">array</span><span class="p">)</span>
  <span class="n">straight?</span><span class="p">(</span><span class="n">array</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="n">flush?</span><span class="p">(</span><span class="n">array</span><span class="p">)</span>
<span class="k">end</span>
</code></pre></div></div><p>Cały kod możesz znaleźć <a href="https://github.com/womanonrails/poker/blob/148429e4591638aef38b5b7abaab5e0198d805c0/lib/poker/hand.rb" title="Drugi krok refaktoringu" target="_blank" rel="nofollow noopener noreferrer">tutaj</a>. Te zmiany moim zdaniem poprawiły odrobinę czytelność kodu.</p><p>Po tym kroku, wszystkie testy przechodziły.</p><h1 id="krok-3---zrozumienie-logiki-i-dalsze-uproszczenia">Krok 3 - Zrozumienie logiki i dalsze uproszczenia</h1><p>Teraz gdy kod jest dla mnie bardziej przejrzysty, mogę przejść do właściwej zmiany logiki. Mam testy, więc każda zmiana będzie się na nich opierała. Cel polegała na ich spełnieniu, czyli sprawieniu, że testy przechodza. Wzięłam pierwszą metodę i usunęłam całe jej wnętrze. Oto co dostałam:</p><p>Kod przed zmianą:</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">one_pair?</span><span class="p">(</span><span class="n">array</span><span class="p">)</span>
  <span class="n">tmp</span> <span class="o">=</span> <span class="n">array</span><span class="p">.</span><span class="nf">clone</span>
  <span class="n">tmp</span><span class="p">.</span><span class="nf">collect!</span><span class="p">{</span><span class="o">|</span><span class="n">x</span><span class="o">|</span> <span class="n">x</span> <span class="o">/</span> <span class="mi">4</span> <span class="p">}</span>

<span class="c1">#  (0..8).each do |elem|</span>
<span class="c1">#    tmp.delete(elem)</span>
<span class="c1">#  end</span>

  <span class="n">helper_array</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="mi">13</span>

  <span class="n">tmp</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">elem</span><span class="o">|</span>
    <span class="n">helper_array</span><span class="p">[</span><span class="n">elem</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
  <span class="k">end</span>

  <span class="n">helper_array</span><span class="p">.</span><span class="nf">delete</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

  <span class="n">helper_array</span><span class="p">.</span><span class="nf">include?</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="k">end</span>
</code></pre></div></div><p>Kod po zmianie:</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">one_pair?</span><span class="p">(</span><span class="n">array</span><span class="p">)</span>
  <span class="nb">hash</span> <span class="o">=</span> <span class="no">Hash</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
  <span class="n">array</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">item</span><span class="o">|</span> <span class="nb">hash</span><span class="p">[</span><span class="n">item</span> <span class="o">/</span> <span class="mi">4</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="p">}</span>
  <span class="nb">hash</span><span class="p">.</span><span class="nf">values</span><span class="p">.</span><span class="nf">include?</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="k">end</span>
</code></pre></div></div><p>Dla każdej metody w tej klasie powtarzałam następujące kroki:</p><ol><li>Brałam metodę i usuwałam jej zawartość</li><li>Uruchamiałam testy (niektóre z nich przestały przechodzić) i na ich podstawie starałam się zrozumieć logikę</li><li>Pisałam nowy kod w prostszy sposób</li><li>Sprawdzałam czy wszystkie testy przechodzą</li></ol><p>Kod po moich zmianach możesz znaleźć <a href="https://github.com/womanonrails/poker/blob/a0bb2f6ab99bf8d977c1b68a53774b2eef7a46ac/lib/poker/hand.rb" title="Trzeci krok refaktoringu" target="_blank" rel="nofollow noopener noreferrer">tutaj</a>. Podczas tego kroku usunęłam również zakomentowany kod, komentarze po polsku i dodałam kilka testów jednostkowych, których moim zdaniem brakowało.</p><h2 id="statystyki">Statystyki:</h2><ul><li><strong>LOC</strong> - 73</li><li><strong>LOT</strong> - 170</li><li><strong>Flog</strong> - 76.3</li><li><strong>Flay</strong> - 63</li><li><strong>Testy</strong> - 12 examples, 0 failures</li></ul><h1 id="krok-4---od-kodu-proceduralnego-do-obiektowego">Krok 4 - Od kodu proceduralnego do obiektowego</h1><p>Nie wiem czy to zauważyłaś, ale do każdej metody przekazujemy argument <code class="highlighter-rouge">array</code>. Kod jest zamknięty w klasę, ale nie używamy tam inicjalizera (metody inicjującej instancję klasy). Poza tym mamy wiele miejsc, gdzie używamy <code class="highlighter-rouge">array.each {|item| hash [item / 4] += 1}</code>. Zacznijmy od przeniesienia tego fragmentu do inicjalizera i użyjmy stanu obiektu do przechowania tej wartości, zamiast wyliczać ją wielokrotnie.</p><h4 id="szybkie-wyjaśnienie">Szybkie wyjaśnienie:</h4><p>Myślę, że to dobry moment aby wytłumaczyć choć odrobinę, jak ten kod działa. Każdą kartę z talii reprezentuje jedna liczba od 0 do 51. Tak więc liczby od 0-3 reprezentują dwójki we wszystkich kolorach, liczby 4-7 reprezentują trójki itd. Całość tej zależności przedstawiona jest w tabeli poniżej:</p><table class="table refactoring-step-by-step"><tbody><tr><td>0</td><td>2&spades;</td><td>4</td><td>3&spades;</td><td>8</td><td>4&spades;</td><td>12</td><td>5&spades;</td><td>16</td><td>6&spades;</td><td>20</td><td>7&spades;</td><td>24</td><td>8&spades;</td></tr><tr><td>1</td><td>2&clubs;</td><td>5</td><td>3&clubs;</td><td>9</td><td>4&clubs;</td><td>13</td><td>5&clubs;</td><td>17</td><td>6&clubs;</td><td>21</td><td>7&clubs;</td><td>25</td><td>8&clubs;</td></tr><tr class="red-text"><td>2</td><td class="red">2&hearts;</td><td>6</td><td class="red">3&hearts;</td><td>10</td><td class="red">4&hearts;</td><td>14</td><td class="red">5&hearts;</td><td>18</td><td class="red">6&hearts;</td><td>22</td><td class="red">7&hearts;</td><td>26</td><td class="red">8&hearts;</td></tr><tr class="red-text"><td>3</td><td class="red">2&diams;</td><td>7</td><td class="red">3&diams;</td><td>11</td><td class="red">4&diams;</td><td>15</td><td class="red">5&diams;</td><td>19</td><td class="red">6&diams;</td><td>23</td><td class="red">7&diams;</td><td>27</td><td class="red">8&diams;</td></tr></tbody></table><p><br /></p><table class="table refactoring-step-by-step"><tbody><tr><td>28</td><td>9&spades;</td><td>32</td><td>10&spades;</td><td>36</td><td>J&spades;</td><td>40</td><td>D&spades;</td><td>44</td><td>K&spades;</td><td>48</td><td>A&spades;</td></tr><tr><td>29</td><td>9&clubs;</td><td>33</td><td>10&clubs;</td><td>37</td><td>J&clubs;</td><td>41</td><td>D&clubs;</td><td>45</td><td>K&clubs;</td><td>49</td><td>A&clubs;</td></tr><tr class="red-text"><td>30</td><td class="red">9&hearts;</td><td>34</td><td class="red">10&hearts;</td><td>38</td><td class="red">J&hearts;</td><td>42</td><td class="red">D&hearts;</td><td>46</td><td class="red">K&hearts;</td><td>50</td><td class="red">A&hearts;</td></tr><tr class="red-text"><td>31</td><td class="red">9&diams;</td><td>35</td><td class="red">10&diams;</td><td>39</td><td class="red">J&diams;</td><td>43</td><td class="red">D&diams;</td><td>47</td><td class="red">K&diams;</td><td>52</td><td class="red">A&diams;</td></tr></tbody></table><p>Jeżeli mamy kod <code class="highlighter-rouge">array.map {|item| item / 4}</code> to tak naprawdę sprawdzamy jaką figurę od 2 do Asa reprezentuje liczba. Natomiast jeżeli mamy <code class="highlighter-rouge">array.map {|item| item % 4}</code> sprawdzamy jakiego koloru jest dana karta (♠, ♣, ♥, ♦).</p><p>Gdybyś potrzebowała dokładniejszego wytłumaczenia zasad pokera, to sprawdź <a href="https://en.wikipedia.org/wiki/List_of_poker_hands" title="Pokerowe ustawienia ręki" target="_blank" rel="nofollow noopener noreferrer">listę wszystkich pokerowych ustawień ręki na Wikipedii</a>.</p><p>Dodajemy inicjalizer:</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">array</span><span class="p">)</span>
  <span class="vi">@array</span> <span class="o">=</span> <span class="n">array</span><span class="p">.</span><span class="nf">sort</span>
  <span class="vi">@cards</span> <span class="o">=</span> <span class="vi">@array</span><span class="p">.</span><span class="nf">map</span> <span class="p">{</span> <span class="o">|</span><span class="n">item</span><span class="o">|</span> <span class="n">item</span> <span class="o">/</span> <span class="mi">4</span> <span class="p">}</span>
<span class="k">end</span>
</code></pre></div></div><p>Przykład metody przed zmianą:</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">three_of_a_kind?</span><span class="p">(</span><span class="n">array</span><span class="p">)</span>
  <span class="nb">hash</span> <span class="o">=</span> <span class="no">Hash</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
  <span class="n">array</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">item</span><span class="o">|</span> <span class="nb">hash</span><span class="p">[</span><span class="n">item</span> <span class="o">/</span> <span class="mi">4</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="p">}</span>
  <span class="nb">hash</span><span class="p">.</span><span class="nf">values</span><span class="p">.</span><span class="nf">include?</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="k">end</span>
</code></pre></div></div><p>Po zmianie:</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">three_of_a_kind?</span>
  <span class="nb">hash</span> <span class="o">=</span> <span class="no">Hash</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
  <span class="vi">@cards</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">item</span><span class="o">|</span> <span class="nb">hash</span><span class="p">[</span><span class="n">item</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="p">}</span>
  <span class="nb">hash</span><span class="p">.</span><span class="nf">values</span><span class="p">.</span><span class="nf">include?</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="k">end</span>
</code></pre></div></div><p>Usunęłam tutaj powtarzające się fragmenty kodu, używając stanu trzymanego w instancji klasy. Kod po tym kroku możesz znaleźć <a href="https://github.com/womanonrails/poker/blob/83d230e969df4d27ffa5e5e34a2cf1aa43e76d90/lib/poker/hand.rb" title="Czwarty krok refaktoringu" target="_blank" rel="nofollow noopener noreferrer">tutaj</a>. Mała uwaga - dodatkowo zrobiłam refaktoring w testach. Postanowiłam przenieść wszystkie możliwe przypadki testowe do tablicy by uniknąć powtórzeń, jakie były widoczne również w testach.</p><h2 id="statystyki-1">Statystyki:</h2><ul><li><strong>LOC</strong> - 76</li><li><strong>LOT</strong> - 190</li><li><strong>Flog</strong> - 70.9</li><li><strong>Flay</strong> - 57</li><li><strong>Testy</strong> - 104 examples, 0 failures</li></ul><h1 id="krok-5---usuwanie-powtórzeń-duplikacji">Krok 5 - Usuwanie powtórzeń (duplikacji)</h1><p>Bazując na metryce Reek zauważyłam dużo powtórzeń w kodzie. Zdecydowałam, że jeszcze raz wykorzystam stan obiektu, by się ich pozbyć. Wszystkie zmiany związane z tym krokiem możesz znaleźć <a href="https://github.com/womanonrails/poker/blob/74c05d7480e7857d1e99d604169f6eed46279758/lib/poker/hand.rb" title="Piąty krok refaktoringu" target="_blank" rel="nofollow noopener noreferrer">tutaj</a>. A poniżej zamieszczam skrót tego co zrobiłam:</p><p>Zmiana w inicjalizerze:</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">array</span><span class="p">)</span>
  <span class="vi">@array</span> <span class="o">=</span> <span class="n">array</span><span class="p">.</span><span class="nf">sort</span>
  <span class="vi">@cards</span> <span class="o">=</span> <span class="vi">@array</span><span class="p">.</span><span class="nf">map</span> <span class="p">{</span> <span class="o">|</span><span class="n">item</span><span class="o">|</span> <span class="n">item</span> <span class="o">/</span> <span class="mi">4</span> <span class="p">}</span>
  <span class="vi">@frequency</span> <span class="o">=</span> <span class="n">cards_frequency</span>
<span class="k">end</span>
</code></pre></div></div><p>Dodanie nowej metody <code class="highlighter-rouge">cards_frequency</code>:</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">cards_frequency</span>
  <span class="nb">hash</span> <span class="o">=</span> <span class="no">Hash</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
  <span class="vi">@cards</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">item</span><span class="o">|</span> <span class="nb">hash</span><span class="p">[</span><span class="n">item</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="p">}</span>
  <span class="nb">hash</span><span class="p">.</span><span class="nf">values</span>
<span class="k">end</span>
</code></pre></div></div><p>Przykład jednej metody przed zmianą:</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">four_of_a_kind?</span>
  <span class="nb">hash</span> <span class="o">=</span> <span class="no">Hash</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
  <span class="vi">@cards</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">item</span><span class="o">|</span> <span class="nb">hash</span><span class="p">[</span><span class="n">item</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="p">}</span>
  <span class="nb">hash</span><span class="p">.</span><span class="nf">values</span><span class="p">.</span><span class="nf">include?</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="k">end</span>
</code></pre></div></div><p>Po zmianie:</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">four_of_a_kind?</span>
  <span class="vi">@frequency</span><span class="p">.</span><span class="nf">include?</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="k">end</span>
</code></pre></div></div><h2 id="statystyki-2">Statystyki:</h2><ul><li><strong>LOC</strong> - 76</li><li><strong>LOT</strong> - 190</li><li><strong>Flog</strong> - 61.0</li><li><strong>Flay</strong> - 0</li><li><strong>Testy</strong> - 104 examples, 0 failures</li></ul><h1 id="krok-6---mały-publiczny-interface">Krok 6 - Mały publiczny interface</h1><p>Kiedy spojrzysz na kod z <a href="https://github.com/womanonrails/poker/blob/74c05d7480e7857d1e99d604169f6eed46279758/lib/poker/hand.rb" title="Piąty krok refaktoringu" target="_blank" rel="nofollow noopener noreferrer">kroku 5</a>, to na pewno zauważysz, że mamy bardzo dużo metod dostępnych publicznie do wykorzystania na obiekcie naszej klasy. <strong>Duży publiczny interface jest ciężki w utrzymaniu.</strong> Jeżeli chciałybyśmy zastąpić naszą klasę <code class="highlighter-rouge">Hand</code> inną klasą, to będziemy potrzebować dokładnie tyle samo metod publicznych, jak w przypadku klasy <code class="highlighter-rouge">Hand</code>. Dodatkowo każda publicznie dostępna metoda może zostać wykorzystana przez inny fragment kodu, co może powodować niepotrzebne zależności między obiektami. W naszym przypadku, jak przyjrzymy się bliżej okaże się, że nawet testy nie sprawdzają wszystkich dostępnych metod. Zajmują się tylko sprawdzeniem metody <code class="highlighter-rouge">check</code>. Zdecydowałam więc, że jedyną publicznie dostępną metodą będzie metoda <code class="highlighter-rouge">check</code>. Pozostałe metody będą pomocniczymi metodami prywatnymi. Zmiany możesz zobaczyć <a href="https://github.com/womanonrails/poker/blob/ef117a56e3cc0fbfae9de4821ac61e5489f704fc/lib/poker/hand.rb" title="Szósty krok refaktoringu" target="_blank" rel="nofollow noopener noreferrer">tutaj</a>.</p><h2 id="statystyki-3">Statystyki:</h2><ul><li><strong>LOC</strong> - 77</li><li><strong>LOT</strong> - 190</li><li><strong>Flog</strong> - 59.9</li><li><strong>Flay</strong> - 0</li><li><strong>Testy</strong> - 104 examples, 0 failures</li></ul><h1 id="krok-7---jeszcze-więcej-porządków">Krok 7 - Jeszcze więcej porządków</h1><p>Ten krok jest podobny do kroku 5. Usuwam dodatkowe powtórzenia w kodzie i zmieniam nazwy na bardziej opisowe, by ułatwić późniejsze czytanie kodu. Stworzyłam nową metodę <code class="highlighter-rouge">cards_figures_and_colors</code>, która przygotuje dwie rzeczy: <code class="highlighter-rouge">figures</code> czyli figury i <code class="highlighter-rouge">colors</code> czyli kolory kart. Możesz teraz powiedzieć: <em>a gdzie jest zasada <strong>pojedynczej odpowiedzialności</strong></em> lub <em><strong>to jest mikro optymalizacja</strong></em>, ponieważ zamiast dwóch pętli masz tylko jedną. Moja intuicja podpowiada mi że to, co zrobiłam jest ok. Ale Ty możesz mieć inne zdanie i to też jest ok. Szanuję je. Oto jak wygląda ta metoda:</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">cards_figures_and_colors</span>
  <span class="vi">@array</span><span class="p">.</span><span class="nf">map</span> <span class="p">{</span> <span class="o">|</span><span class="n">item</span><span class="o">|</span> <span class="p">[</span><span class="n">item</span> <span class="o">/</span> <span class="mi">4</span><span class="p">,</span> <span class="n">item</span> <span class="o">%</span> <span class="mi">4</span><span class="p">]</span> <span class="p">}.</span><span class="nf">transpose</span>
<span class="k">end</span>
</code></pre></div></div><p>Jestem otwarta na dyskusję, czy moje podejście jest dobre czy nie. Ta zmiana pociąga za sobą także zmiany w metodzie <code class="highlighter-rouge">initialize</code>:</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">array</span><span class="p">)</span>
  <span class="vi">@array</span> <span class="o">=</span> <span class="n">array</span><span class="p">.</span><span class="nf">sort</span>
  <span class="vi">@figures</span><span class="p">,</span> <span class="vi">@colors</span> <span class="o">=</span> <span class="n">cards_figures_and_colors</span>
  <span class="vi">@frequency</span> <span class="o">=</span> <span class="n">cards_frequency</span><span class="p">.</span><span class="nf">values</span>
<span class="k">end</span>
</code></pre></div></div><p>W tym kroku postanowiłam zmienić również metodę <code class="highlighter-rouge">cards_frequency</code>. Zamiast używać <code class="highlighter-rouge">each</code> używam <code class="highlighter-rouge">each_with_object</code>. Jeżeli jesteś zainteresowana większą ilością informacji na temat <code class="highlighter-rouge">each_with_object</code> zachęcam Cię do przeczytania mojego artykułu o <a href="https://womanonrails.com/pl/each-with-object" title="Zastosowanie metody each_with_object w języku Ruby">użyciu metody each_with_object w Ruby</a>. Oto jak teraz wygląda kod:</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">cards_frequency</span>
  <span class="vi">@figures</span><span class="p">.</span><span class="nf">each_with_object</span><span class="p">(</span><span class="no">Hash</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span> <span class="k">do</span> <span class="o">|</span><span class="n">item</span><span class="p">,</span> <span class="nb">hash</span><span class="o">|</span>
    <span class="nb">hash</span><span class="p">[</span><span class="n">item</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div><p>Dzięki zmiennej <code class="highlighter-rouge">@colors</code> mogę zmienić metodę <code class="highlighter-rouge">flush?</code> z:</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">flush?</span>
  <span class="n">color</span> <span class="o">=</span> <span class="vi">@array</span><span class="p">.</span><span class="nf">map</span> <span class="p">{</span> <span class="o">|</span><span class="n">item</span><span class="o">|</span> <span class="n">item</span> <span class="o">%</span> <span class="mi">4</span> <span class="p">}</span>
  <span class="n">color</span><span class="p">.</span><span class="nf">uniq</span><span class="p">.</span><span class="nf">size</span> <span class="o">==</span> <span class="mi">1</span>
<span class="k">end</span>
</code></pre></div></div><p>na:</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">flush?</span>
  <span class="vi">@colors</span><span class="p">.</span><span class="nf">uniq</span><span class="p">.</span><span class="nf">size</span> <span class="o">==</span> <span class="mi">1</span>
<span class="k">end</span>
</code></pre></div></div><p>Wszystkie zmiany możesz zobaczyć <a href="https://github.com/womanonrails/poker/blob/46e12428d0d67cb90d17f417147dc936815a69e7/lib/poker/hand.rb" title="Siódmy krok refaktoringu" target="_blank" rel="nofollow noopener noreferrer">tutaj</a>.</p><h2 id="statystyki-4">Statystyki:</h2><ul><li><strong>LOC</strong> - 80</li><li><strong>LOT</strong> - 190</li><li><strong>Flog</strong> - 64.5</li><li><strong>Flay</strong> - 0</li><li><strong>Testy</strong> - 104 examples, 0 failures</li></ul><h1 id="podsumowanie">Podsumowanie</h1><p>Podsumujmy co do tej pory udało nam się osiągnąć:</p><ul><li>Użyłyśmy metryk do pierwszych, wstępnych porządków</li><li>Uprościłyśmy kod bazując na testach i zrozumieniu logiki</li><li>Zmieniłyśmy kod proceduralny na obiektowy</li><li>Usunęłyśmy powtórzenia w kodzie</li><li>i stworzyłyśmy mały publiczny interface</li></ul><p>W następnym artykule chciałabym wejść jeszcze głębiej w temat tego refaktoringu i skupić się na:</p><ul><li>Bardziej opisowym kodzie</li><li>Meta-programowaniu jako sposobie na pisanie elastycznego kodu</li><li>Przygotowaniu małych niezależnych klas, zamiast jednej dużej klasy</li><li>Budowaniu klas jako elementów wymiennych i takich, które można ze sobą łączyć</li><li>Wyjaśnieniu po co podawałam metryki na każdym kroku i co one nam wlaściwie mówią</li></ul><p>Trzymaj się! Mój następny artykuł pojawi się już wkrótce! Jeżeli masz jakieś pytania lub przemyślenia, to podziel się nimi w komentarzach. Do zobaczenia następnym razem. Cześć!</p><hr /><h3 id="bibliografia">Bibliografia</h3><h4 id="książki">Książki</h4><ul><li><a href="https://helion.pl/view/10301k/refukv.htm#format/d" title="Książka opisuje proces refaktoryzacji i wyjaśnia różne jej sposoby" target="_blank" rel="nofollow noopener">Refaktoryzacja. Ulepszanie struktury istniejącego kodu - Martin Fowler</a></li><li><a href="https://helion.pl/view/10301k/czykov.htm#format/d" title="Ta książka jest niezbędna dla każdego programisty, inżyniera oprogramowania, kierownika projektu, kierownika zespołu lub analityka systemowego, którzy są zainteresowani tworzeniem lepszego kodu." target="_blank" rel="nofollow noopener">Czysty kod. Podręcznik dobrego programisty - Robert C. Martin</a></li><li><a href="https://helion.pl/view/10301k/rubywz.htm#format/d" title="Ta książka stanowi doskonałą ilustrację kluczowych wzorców projektowych &quot;Gangu czworga&quot; bez uciekania się do zbyt technicznych wyjaśnień." target="_blank" rel="nofollow noopener">Ruby. Wzorce projektowe - Russ Olsen</a></li><li><a href="https://helion.pl/view/10301k/tddszt.htm#format/d" title="Książka opisuje krok po kroku dwa projekty TDD od początku do końca, ilustrując techniki, które programiści mogą wykorzystać, aby podnieść jakość swojej pracy." target="_blank" rel="nofollow noopener">TDD. Sztuka tworzenia dobrego kodu - Ken Beck</a></li><li><a href="https://www.amazon.de/gp/product/0134456475?ie=UTF8&amp;tag=womanonrails-21&amp;camp=1638&amp;linkCode=xm2&amp;creativeASIN=0134456475" title="POODR to praktyczne i czytelne wprowadzenie do tego, w jaki sposób projektowanie obiektowe może obniżyć koszty i ulepszyć aplikacje." target="_blank" rel="nofollow noopener">Practical Object-Oriented Design in Ruby: An Agile Primer - Sandi Metz [EN]</a></li><li><a href="https://helion.pl/view/10301k/pragpv.htm#format/d" title="Jest to jedna z tych rzadkich książek technicznych, które przeczytasz wielokrotnie przez lata i za każdym razem będziesz mieć nowe, świeże spojrzenie." target="_blank" rel="nofollow noopener">Pragmatyczny programista. Od czeladnika do mistrza - Andrew Hund, David Thomas</a></li></ul><h4 id="prezentacje-angielskojęzyczne">Prezentacje angielskojęzyczne</h4><ul><li><a href="https://www.youtube.com/watch?v=8bZh5LMaSmE" rel="nofollow noopener noreferrer" title="All the Little Things by Sandi Metz" target="_blank">All the Little Things by Sandi Metz</a></li><li><a href="https://www.youtube.com/watch?v=5yX6ADjyqyE" rel="nofollow noopener noreferrer" title="Fat Models with Patterns by Bryan Helmkamp" target="_blank">LA Ruby Conference 2013 Refactoring Fat Models with Patterns by Bryan Helmkamp</a></li><li><a href="https://www.youtube.com/watch?v=OMPfEXIlTVE" rel="nofollow noopener noreferrer" title="Nothing is something by Sandi Metz" target="_blank">Nothing is something by Sandi Metz</a></li><li><a href="https://infinum.co/the-capsized-eight/best-ruby-on-rails-refactoring-talks" rel="nofollow noopener noreferrer" title="8 best Ruby on Rails refactoring talks" target="_blank">Best Ruby on Rails refactoring talks</a></li></ul><br><div class='entry-tags text-center'> <span class='svg--tags'><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 230 230"><path d="M95.084 0H.13v95.475L134.658 230l95.212-95.212L95.084 0zM61.138 61.268c-6.988 6.989-18.321 6.989-25.309 0-6.989-6.987-6.99-18.321 0-25.308 6.987-6.99 18.321-6.989 25.309 0 6.989 6.987 6.989 18.321 0 25.308z"/></svg></span> Tagged with <a href="/pl/tags/#Ruby" data-toggle='tooltip' title='Posts tagged with Ruby' rel='tag'>Ruby</a></div></div></article></div><footer class='post-footer entry-meta'><div class='post-share text-center'><p class='light small'> Share this post</p><ul class='social-mini'><li> <a data-toggle='tooltip' href="https://twitter.com/intent/tweet?text=&quot;Refaktoring w Ruby krok po kroku - część 1&quot;%20https://womanonrails.com/refactoring-step-by-step%20via%20&#64;womanonrails" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;" title='Share on Twitter'> <span class='svg--twitter'><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg></span> </a></li><li> <a data-toggle='tooltip' href='https://www.facebook.com/sharer/sharer.php?u=https://womanonrails.com/refactoring-step-by-step' onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;" title='Share on Facebook'> <span class='svg--facebook'><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 264 512"><path d="M76.7 512V283H0v-91h76.7v-71.7C76.7 42.4 124.3 0 193.8 0c33.3 0 61.9 2.5 70.2 3.6V85h-48.2c-37.8 0-45.1 18-45.1 44.3V192H256l-11.7 91h-73.6v229"/></svg></span> </a></li></ul></div><div class="post-author text-center"> <img src="https://womanonrails.com/images/womanonrails-square.svg" alt="Agnieszka Małaszkiewicz's photo" itemprop="image" class="post-avatar img-circle img-responsive"/><h4 class="bordered-bottom vcard author" itemprop="author" itemscope itemtype="https://schema.org/Person">By <span itemprop="name" class="fn"><a href="https://womanonrails.com/about" title="About Agnieszka Małaszkiewicz" itemprop="url">Agnieszka Małaszkiewicz</a></span></h4><p>Woman, programmer, mentor, speaker, photographer and dancer with passion.</p></div></footer></div></div><footer id='footer' class='blog-background overlay text-center align-middle animated from-top'><div class='inner'><div class='container'><ul class='social-icons'><li> <a href='https://twitter.com/womanonrails' rel='nofollow noopener noreferrer' target='_blank'> <span class='svg--twitter'><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg></span> </a></li><li> <a href='https://facebook.com/107403177317825' rel='nofollow noopener noreferrer' target='_blank'> <span class='svg--facebook'><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 264 512"><path d="M76.7 512V283H0v-91h76.7v-71.7C76.7 42.4 124.3 0 193.8 0c33.3 0 61.9 2.5 70.2 3.6V85h-48.2c-37.8 0-45.1 18-45.1 44.3V192H256l-11.7 91h-73.6v229"/></svg></span> </a></li><li> <a href='https://stackoverflow.com/users/2885676/womanonrails' rel='nofollow noopener noreferrer' target='_blank'> <span class='svg--stackoverflow'><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path d="M293.7 300l-181.2-84.5 16.7-36.5 181.3 84.7-16.8 36.3zm48-76L188.2 95.7l-25.5 30.8 153.5 128.3 25.5-30.8zm39.6-31.7L262 32l-32 24 119.3 160.3 32-24zM290.7 311L95 269.7 86.8 309l195.7 41 8.2-39zm31.6 129H42.7V320h-40v160h359.5V320h-40v120zm-39.8-80h-200v39.7h200V360z"/></svg></span> </a></li><li> <a href='https://linkedin.com/in/womanonrails' rel='nofollow noopener noreferrer' target='_blank'> <span class='svg--linkedin'><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M100.3 480H7.4V180.9h92.9V480zM53.8 140.1C24.1 140.1 0 115.5 0 85.8 0 56.1 24.1 32 53.8 32c29.7 0 53.8 24.1 53.8 53.8 0 29.7-24.1 54.3-53.8 54.3zM448 480h-92.7V334.4c0-34.7-.7-79.2-48.3-79.2-48.3 0-55.7 37.7-55.7 76.7V480h-92.8V180.9h89.1v40.8h1.3c12.4-23.5 42.7-48.3 87.9-48.3 94 0 111.3 61.9 111.3 142.3V480z"/></svg></span> </a></li><li> <a href='https://instagram.com/womanonrails_programuje' rel='nofollow noopener noreferrer' target='_blank'> <span class='svg--linkedin'><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"/></svg></span> </a></li><li> <a href='https://github.com/womanonrails' rel='nofollow noopener noreferrer' target='_blank'> <span class='svg--github'><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 399.378c0 2.052-2.3 3.693-5.2 3.693-3.3.307-5.6-1.334-5.6-3.693 0-2.05 2.3-3.692 5.2-3.692 3-.307 5.6 1.334 5.6 3.692zm-31.1-4.615c-.7 2.051 1.3 4.41 4.3 5.026 2.6 1.025 5.6 0 6.2-2.052.6-2.05-1.3-4.41-4.3-5.333-2.6-.718-5.5.308-6.2 2.36zm44.2-1.743c-2.9.718-4.9 2.666-4.6 5.025.3 2.051 2.9 3.385 5.9 2.667 2.9-.718 4.9-2.667 4.6-4.718-.3-1.949-3-3.282-5.9-2.974zM244.8 0C106.1 0 0 107.998 0 250.253c0 113.741 69.8 211.073 169.5 245.33 12.8 2.358 17.3-5.744 17.3-12.411 0-6.359-.3-41.435-.3-62.973 0 0-70 15.384-84.7-30.564 0 0-11.4-29.846-27.8-37.538 0 0-22.9-16.102 1.6-15.794 0 0 24.9 2.05 38.6 26.46 21.9 39.59 58.6 28.205 72.9 21.436 2.3-16.41 8.8-27.794 16-34.563-55.9-6.36-112.3-14.667-112.3-113.332 0-28.205 7.6-42.358 23.6-60.41-2.6-6.666-11.1-34.153 2.6-69.64 20.9-6.666 69 27.693 69 27.693 20-5.744 41.5-8.718 62.8-8.718 21.3 0 42.8 2.974 62.8 8.718 0 0 48.1-34.461 69-27.692 13.7 35.589 5.2 62.973 2.6 69.64 16 18.153 25.8 32.307 25.8 60.409 0 98.973-58.9 106.87-114.8 113.332 9.2 8.102 17 23.486 17 47.589 0 34.563-.3 77.332-.3 85.742 0 6.666 4.6 14.769 17.3 12.41 100-34.05 167.8-131.383 167.8-245.124C496 107.998 383.5 0 244.8 0zM97.2 353.738c-1.3 1.026-1 3.385.7 5.333 1.6 1.641 3.9 2.36 5.2 1.026 1.3-1.026 1-3.385-.7-5.333-1.6-1.641-3.9-2.36-5.2-1.026zm-10.8-8.307c-.7 1.333.3 2.974 2.3 4 1.6 1.025 3.6.717 4.3-.718.7-1.334-.3-2.975-2.3-4-2-.616-3.6-.308-4.3.718zm32.4 36.512c-1.6 1.333-1 4.41 1.3 6.359 2.3 2.359 5.2 2.666 6.5 1.025 1.3-1.333.7-4.41-1.3-6.359-2.2-2.358-5.2-2.666-6.5-1.025zm-11.4-15.077c-1.6 1.026-1.6 3.692 0 6.051 1.6 2.36 4.3 3.385 5.6 2.36 1.6-1.334 1.6-4 0-6.36-1.4-2.359-4-3.384-5.6-2.05z"/></svg></span> </a></li></ul><div> Agnieszka Małaszkiewicz &copy; 2021 &bull; All rights reserved.</div><ul class='menu-items'><li> <a href="/"> <span class='svg--home'><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M16 256L256 64l96 72v-32h48v72l96 80h-48v192H328V288h-96v160H64V256z"/></svg></span> </a>&bull;</li><li> <a href="/workshops"> Programming courses </a>&bull;</li><li> <a href="/categories"> Categories </a>&bull;</li><li> <a href="/tags"> Tags </a>&bull;</li><li> <a href="/about"> About </a>&bull;</li><li> <a href="/pl/feed.xml" title='Atom/RSS feed'> <span class='svg--rss'><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>RSS icon</title><path d="M19.199 24C19.199 13.467 10.533 4.8 0 4.8V0c13.165 0 24 10.835 24 24h-4.801zM3.291 17.415c1.814 0 3.293 1.479 3.293 3.295 0 1.813-1.485 3.29-3.301 3.29C1.47 24 0 22.526 0 20.71s1.475-3.294 3.291-3.295zM15.909 24h-4.665c0-6.169-5.075-11.245-11.244-11.245V8.09c8.727 0 15.909 7.184 15.909 15.91z"/></svg></span> Feed </a></li></ul></div><div> <a class='btn btn-default' href='https://paypal.me/womanonrails' target='_blank' rel='nofollow noopener' style='border-radius: 10px !important;'> <img alt='PayPal' height='20' src='/images/donations/paypal.svg'> </a> <a href='https://ko-fi.com/womanonrails' target='_blank' rel='nofollow noopener'> <img alt='Ko-fi' height='34' src='/images/donations/ko-fi.svg'> </a></div></div><div class="decor-wrapper"> <svg id="footer-decor" class="decor top" xmlns="https://www.w3.org/2000/svg" version="1.1" viewBox="0 0 100 100" preserveAspectRatio="none"><path class="large left" d="M0 0 L50 50 L0 100" fill="rgba(255,255,255, .1)"></path><path class="large right" d="M100 0 L50 50 L100 100" fill="rgba(255,255,255, .1)"></path><path class="medium left" d="M0 0 L50 50 L0 66.6" fill="rgba(255,255,255, .3)"></path><path class="medium right" d="M100 0 L50 50 L100 66.6" fill="rgba(255,255,255, .3)"></path><path class="small left" d="M0 0 L50 50 L0 33.3" fill="rgba(255,255,255, .5)"></path><path class="small right" d="M100 0 L50 50 L100 33.3" fill="rgba(255,255,255, .5)"></path><path d="M0 0 L50 50 L100 0 L0 0" fill="rgba(255,255,255, 1)"></path><path d="M48 48 L50 51 L52 48 L48 48" fill="rgba(255,255,255, 1)"></path> </svg></div></footer><script async src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> <script>window.jQuery || document.write('<script src="https://womanonrails.com/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script> <script src="https://womanonrails.com/assets/js/scripts.min.js"></script> <script type="text/javascript" src="https://womanonrails.com/assets/js/waypoints.min.js"></script> <script type="text/javascript" src="https://womanonrails.com/assets/js/script.js"></script> <script type='text/javascript'>$(document).ready(function(){$(".time").text(function(a,b){return Math.round(parseFloat(b))})});</script> <script type="text/javascript"> /* Slides */ $("a#slide").click(function(){ $("#sidebar,body,a#slide,#fade").addClass("slide") }); $("#fade,#header,#posts-container").click(function(){ $("#sidebar,body,a#slide,#fade").removeClass("slide") }); $("a#click-filter").click(function(){ $("#slide-filter").slideToggle("medium"); $("#slide-pages").slideOut("medium"); }); $("a#click-pages").click(function(){ $("#slide-pages").slideToggle("medium"); $("#slide-filter").slideOut("medium"); }); /* End-Slides */ </script> <script> $(document).ready(function() { $('.search-field').simpleJekyllSearch({ jsonFile : '/pl/search.json', searchResults : '.search-results', template : '<li><article><a href="{url}">{title} <span class="entry-date"><time datetime="{date}">{shortdate}</time></span></a></article></li>', noResults: '<p>Nothing found.</p>' }); }); (function( $, window, undefined ) { var bs = { close: $(".js-remove-sign"), searchform: $(".search-form"), canvas: $("body"), dothis: $('.dosearch') }; bs.dothis.on('click', function() { $('.search-wrapper').css({ display: "block" }); bs.searchform.toggleClass('active'); bs.searchform.find('input').focus(); bs.canvas.toggleClass('search-overlay'); }); bs.close.on('click', function() { $('.search-wrapper').removeAttr( 'style' ); bs.searchform.toggleClass('active'); bs.canvas.removeClass('search-overlay'); }); })( jQuery, window ); </script> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-127731573-1"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-127731573-1'); </script></body></html>
