<!DOCTYPE html><html lang="en"><head><meta charset='utf-8'><title>Ruby Refactoring step by step - part 1</title><meta name='description' content='How refactor your code? <br> From procedural to more object related code.'><meta name='viewport' content='width=device-width, initial-scale=1.0'><meta name="generator" content="Jekyll v4.0.1" /><meta property="og:title" content="Ruby Refactoring step by step - part 1" /><meta name="author" content="womanonrails" /><meta property="og:locale" content="en" /><meta name="description" content="How refactor your code? From procedural to more object related code." /><meta property="og:description" content="How refactor your code? From procedural to more object related code." /><link rel="canonical" href="https://womanonrails.com/refactoring-step-by-step" /><meta property="og:url" content="https://womanonrails.com/refactoring-step-by-step" /><meta property="og:site_name" content="Woman on Rails" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2018-10-08T00:00:00-04:00" /> <script type="application/ld+json"> {"description":"How refactor your code? From procedural to more object related code.","url":"https://womanonrails.com/refactoring-step-by-step","@type":"BlogPosting","headline":"Ruby Refactoring step by step - part 1","dateModified":"2018-10-08T00:00:00-04:00","datePublished":"2018-10-08T00:00:00-04:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://womanonrails.com/refactoring-step-by-step"},"author":{"@type":"Person","name":"womanonrails"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://womanonrails.com/womanonrails-square.svg"},"name":"womanonrails"},"@context":"https://schema.org"}</script><meta name='twitter:card' content='summary'><meta name='twitter:creator' content='@womanonrails'><meta name='twitter:description' content='How refactor your code? <br> From procedural to more object related code.'><meta name='twitter:image' content='https://womanonrails.com/images/womanonrails-square.svg'><meta name='twitter:title' content='Ruby Refactoring step by step - part 1'><meta property='og:description' content='How refactor your code? <br> From procedural to more object related code.'><meta property='og:image' content='https://womanonrails.com/images/womanonrails-1000x1000.jpg'><meta property='og:title' content='Ruby Refactoring step by step - part 1'><meta property='og:type' content='website'><link href='https://womanonrails.com/favicon.ico' rel='shortcut icon' type='image/x-icon' /><link href='https://womanonrails.com/favicon.png' rel='shortcut icon' type='image/png' /><link href='/feed.xml' rel='alternate' title='Woman on Rails Feed' type='application/atom+xml' /><link async href='/assets/css/bootstrap.css' media='all' rel='stylesheet' /><link href='/assets/css/style.css' media='all' rel='stylesheet' /><link href='/css/main.css' media='all' rel='stylesheet' /><link href='/assets/css/applause-button.css' rel='stylesheet' /> <script defer src='/assets/js/applause-button.js'></script><div class="search-wrapper"><div class="search-form"> <input type="text" class="search-field" placeholder="Search..."> <span class='js-remove-sign'> <span class='svg--cancel'><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 375 375"><path d="M187.5 2.5a185 185 0 0 0-185 185 185 185 0 0 0 185 185 185 185 0 0 0 185-185 185 185 0 0 0-185-185zm-85.906 78.875a20.232 20.232 0 0 1 14.518 6.132l71.388 71.388 71.388-71.388a20.232 20.232 0 0 1 13.909-6.121 20.232 20.232 0 0 1 14.702 34.73l-71.39 71.388 71.39 71.39a20.232 20.232 0 1 1-28.61 28.61L187.5 216.115l-71.388 71.389a20.232 20.232 0 1 1-28.611-28.61l71.39-71.39-71.39-71.388a20.232 20.232 0 0 1 14.093-34.74z"/></svg></span> </span><ul class="search-results post-list"></ul></div></div></head><body class="post-template" itemscope itemtype="https://schema.org/WebPage"><div id="fade"></div><a id="slide" class="animated fade"></a><aside id="sidebar"><nav id="navigation"><h2>MENU</h2><hr><ul><li> <a href="https://womanonrails.com/">Home</a></li><li> <a href="https://womanonrails.com/workshops">Programming courses</a></li><li> <a href="https://womanonrails.com/categories">Categories</a></li><li> <a href="https://womanonrails.com/tags">Tags</a></li><li> <a href="https://womanonrails.com/presentations/">Presentations</a></li><li> <a href="https://womanonrails.com/about">About me</a></li><li> <a href="/feed.xml" title='Atom/RSS feed'> <span class='svg--rss'><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>RSS icon</title><path d="M19.199 24C19.199 13.467 10.533 4.8 0 4.8V0c13.165 0 24 10.835 24 24h-4.801zM3.291 17.415c1.814 0 3.293 1.479 3.293 3.295 0 1.813-1.485 3.29-3.301 3.29C1.47 24 0 22.526 0 20.71s1.475-3.294 3.291-3.295zM15.909 24h-4.665c0-6.169-5.075-11.245-11.244-11.245V8.09c8.727 0 15.909 7.184 15.909 15.91z"/></svg></span> Feed </a></li></ul></nav></aside><header class='blog-background overlay align-center align-middle animated from-bottom' id='masthead' itemscope itemtype='https://schema.org/Organization'> <button class='menu-button animated fade dosearch' title='Search'> <span class='svg--search'><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 13"> <g stroke-width="1.5" fill="none"><path d="M11.29 11.71l-4-4"/><circle cx="5" cy="5" r="4"/> </g> </svg></span> </button> <a href="/pl/refactoring-step-by-step" class='language animated fade'> pl </a><div class='inner'><div class='container'> <a class='brand' href='/' itemprop='url' role='banner'> <img itemprop='logo' src="https://womanonrails.com/images/womanonrails-square.svg" alt="Woman on Rails Logo" width='120' /><h1 class='blog-title light' itemprop='name'> Woman on Rails</h1></a><h2 class='blog-description light bordered bordered-top' itemprop='description'> Premature optimization is the root of all evil.</h2></div></div><div class="decor-wrapper"> <svg id="header-decor" class="decor bottom" xmlns="https://www.w3.org/2000/svg" version="1.1" viewBox="0 0 100 100" preserveAspectRatio="none"><path class="large left" d="M0 0 L50 50 L0 100" fill="rgba(255,255,255, .1)"></path><path class="large right" d="M100 0 L50 50 L100 100" fill="rgba(255,255,255, .1)"></path><path class="medium left" d="M0 100 L50 50 L0 33.3" fill="rgba(255,255,255, .3)"></path><path class="medium right" d="M100 100 L50 50 L100 33.3" fill="rgba(255,255,255, .3)"></path><path class="small left" d="M0 100 L50 50 L0 66.6" fill="rgba(255,255,255, .5)"></path><path class="small right" d="M100 100 L50 50 L100 66.6" fill="rgba(255,255,255, .5)"></path><path d="M0 99.9 L50 49.9 L100 99.9 L0 99.9" fill="rgba(255,255,255, 1)"></path><path d="M48 52 L50 49 L52 52 L48 52" fill="rgba(255,255,255, 1)"></path> </svg></div></header><div class='content' id='main' itemprop='mainContentOfPage' itemscope itemtype='https://schema.org/WebPageElement' role='main'><div class='container'><div class='row'><div class='applause hidden-xs hidden-sm'> <applause-button color='#c33' multiclap='true' style='width: 58px; height: 58px;' url='https://womanonrails.com/refactoring-step-by-step' /></div><article class='post col-md-8 col-md-offset-2 hentry' itemprop='blogPost' itemscope itemtype='https://schema.org/BlogPosting'><header class='post-header entry-header'><h1 class='post-title text-center hyper lighter bordered-bottom entry-title' itemprop='headline'> Ruby Refactoring step by step - part 1</h1><div class='cursive'>How refactor your code? <br> From procedural to more object related code.</div><div class='post-info text-center small'> <span class='post-tags'> <a data-toggle='tooltip' href="/categories/#refactoring" title="Other posts from the Refactoring category" rel="tag">Refactoring</a> </span> | <span class='post-tags reading-time'> <span class='time'>9</span> min. </span></div></header><div class='post-body bordered-bottom' itemprop='description'><p>It was a long break from the last technical article. During that time I was trying many different things. You can look here: <a href="https://bemore.womanonrails.com/" title="Be more - Life style blog" target="_blank">Be More - my lifestyle blog in Polish</a>, <a href="https://www.youtube.com/channel/UCudKRFuddrf8saaxUEoo0xQ" title="Woman on Rails YouTube channel" target="_blank" rel="nofollow noopener noreferrer">Woman on Rails YouTube channel</a> and my <a href="https://vimeo.com/womanonrails" title="Woman on Rails - Vimeo channel" target="_blank" rel="nonofollow noopener noreferrer">travel Vimeo channel</a>. It was a great time to discover what I like to do and what not. But back to the topic. I prepared this article for a long time. I can say even too long. I started in 2015 and now you will see the results. Let’s get started.</p><p>Refactoring is one of my favorite topics. I love to clean up things in real life and also in code. I’ve worked and I’m still working on web application projects. And I look for answers on how to write good code. What are the reasons that after some time our code is messy and not readable? So day by day I learn how to refactor code in a good way based on my experience and the experience of others. Today I would like to share an example of refactoring with you.</p><p>I got a code which was written by a person on internship long time ago in <a href="https://fractalsoft.org/" title="Fractal Soft - Ruby on Rails web applications" target="_blank">my company</a>. The plan was to improve this code. It was mostly one class which you can see <a href="https://github.com/womanonrails/poker/blob/55c9ae0ab921f7aa95bb7e47676d87b970a32033/lib/poker/hand.rb" title="Code before refactoring" target="_blank" rel="nofollow noopener noreferrer">here</a>. In this one class you have all rules in poker to check a hand only for cards without jokers. That code is not bad. When you know business logic (in this case poker rules), you will be able to move around this code. This code has also tests. So, this is good news. It will be easier to change something if tests cover all logic. If they don’t, we can break functionality, when we won’t be careful. The code looks more procedural than object oriented and it has some duplications. Sometimes this will be enough. When this is written once and you will not need to change this code for long time <strong>maybe</strong> you don’t need to clean it up. But if the requirements can/will change, probably your code does too. You need to decide if it is better to refactor it now or later. (I prefer refactoring now, when I still remember logic and code, then later when I need to understand it one more time.) I would like to show you how I do refactoring base on this example.</p><h1 id="step-1---preparing-environment-to-work">Step 1 - Preparing environment to work</h1><p>I updated gems which were in the project and I installed gems like Rubocop or Reek to help myself start refactoring. Those tools are helpful to see where problem in code can be. To do this, first do the overview. But those are only tools, sometimes they are right and sometimes are not. And it is easy to cheat them. But this is another topic.</p><h2 id="stats-based-on-metrics">Stats (based on metrics):</h2><ul><li><strong>LOC</strong> (Line of code) - 194</li><li><strong>LOT</strong> (Line of tests) - 168</li><li><strong>Flog</strong> - 112.8</li><li><strong>Flay</strong> - 123</li><li><strong>Tests</strong> - 12 examples, 0 failures</li></ul><h1 id="step-2---start-first-clean-ups">Step 2 - Start first clean ups</h1><p>Base on tests without going deep into logic, I made some improvements in the code. I removed some condition and simplified this code.</p><p>Code before change:</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">straight_flush?</span><span class="p">(</span><span class="n">array</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">straight?</span><span class="p">(</span><span class="n">array</span><span class="p">)</span> <span class="n">and</span> <span class="n">flush?</span><span class="p">(</span><span class="n">array</span><span class="p">)</span>
    <span class="k">return</span> <span class="kp">true</span>
  <span class="k">else</span>
    <span class="k">return</span> <span class="kp">false</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div><p>Code after change:</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">straight_flush?</span><span class="p">(</span><span class="n">array</span><span class="p">)</span>
  <span class="n">straight?</span><span class="p">(</span><span class="n">array</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="n">flush?</span><span class="p">(</span><span class="n">array</span><span class="p">)</span>
<span class="k">end</span>
</code></pre></div></div><p>All the code you can find <a href="https://github.com/womanonrails/poker/blob/148429e4591638aef38b5b7abaab5e0198d805c0/lib/poker/hand.rb" title="Code after 2nd step of refactoring" target="_blank" rel="nofollow noopener noreferrer">here</a>. This change, in my opinion, improves readability a little bit.</p><p>After that all tests passed.</p><h1 id="step-3---understand-the-logic-and-try-to-simplify-it">Step 3 - Understand the logic and try to simplify it</h1><p>Now when code is more readable, I can start changing the logic to simplify it. I have tests, so each of my changes relies on tests. I took the first method. I removed it (remove all content inside). And start from the beginning. This is what I got.</p><p>Code before change:</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">one_pair?</span><span class="p">(</span><span class="n">array</span><span class="p">)</span>
  <span class="n">tmp</span> <span class="o">=</span> <span class="n">array</span><span class="p">.</span><span class="nf">clone</span>
  <span class="n">tmp</span><span class="p">.</span><span class="nf">collect!</span><span class="p">{</span><span class="o">|</span><span class="n">x</span><span class="o">|</span> <span class="n">x</span> <span class="o">/</span> <span class="mi">4</span> <span class="p">}</span>

<span class="c1">#  (0..8).each do |elem|</span>
<span class="c1">#    tmp.delete(elem)</span>
<span class="c1">#  end</span>

  <span class="n">helper_array</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="mi">13</span>

  <span class="n">tmp</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">elem</span><span class="o">|</span>
    <span class="n">helper_array</span><span class="p">[</span><span class="n">elem</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
  <span class="k">end</span>

  <span class="n">helper_array</span><span class="p">.</span><span class="nf">delete</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

  <span class="n">helper_array</span><span class="p">.</span><span class="nf">include?</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="k">end</span>
</code></pre></div></div><p>Code after:</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">one_pair?</span><span class="p">(</span><span class="n">array</span><span class="p">)</span>
  <span class="nb">hash</span> <span class="o">=</span> <span class="no">Hash</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
  <span class="n">array</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">item</span><span class="o">|</span> <span class="nb">hash</span><span class="p">[</span><span class="n">item</span> <span class="o">/</span> <span class="mi">4</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="p">}</span>
  <span class="nb">hash</span><span class="p">.</span><span class="nf">values</span><span class="p">.</span><span class="nf">include?</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="k">end</span>
</code></pre></div></div><p>I repeat that approach over and over again for all methods.</p><ol><li>Take method and remove content</li><li>Run the tests (some tests are failing), understand the logic</li><li>Write new code in a simpler way</li><li>Check the tests</li></ol><p>After this step you can find the code <a href="https://github.com/womanonrails/poker/blob/a0bb2f6ab99bf8d977c1b68a53774b2eef7a46ac/lib/poker/hand.rb" title="Code after 3rd step of refactoring" target="_blank" rel="nofollow noopener noreferrer">here</a>. During that step I also removed commented code, Polish comments and I added some tests, which for me, were missing.</p><h2 id="stats">Stats:</h2><ul><li><strong>LOC</strong> - 73</li><li><strong>LOT</strong> - 170</li><li><strong>Flog</strong> - 76.3</li><li><strong>Flay</strong> - 63</li><li><strong>Tests</strong> - 12 examples, 0 failures</li></ul><h1 id="step-4---from-procedural-to-more-object-oriented-code">Step 4 - From procedural to more object oriented code</h1><p>I don’t know if you noticed this, but everywhere we put as argument <code class="highlighter-rouge">array</code>. And we have class, but we don’t use initializer for this class. The second thing is that in many places we use something like <code class="highlighter-rouge">array.each {|item| hash [item / 4] += 1}</code> let’s move this also for initializer and use class state instead of calculating this everywhere.</p><h4 id="quick-explanation">Quick explanation:</h4><p>I think at this point I should explain a little bit how this code works. Each card has representation as a number from 0 to 51. So number 0-3 represents 2 with all colors, 4-7 represents 3 and so on. Like in this table:</p><table class="table refactoring-step-by-step"><tbody><tr><td>0</td><td>2&spades;</td><td>4</td><td>3&spades;</td><td>8</td><td>4&spades;</td><td>12</td><td>5&spades;</td><td>16</td><td>6&spades;</td><td>20</td><td>7&spades;</td><td>24</td><td>8&spades;</td></tr><tr><td>1</td><td>2&clubs;</td><td>5</td><td>3&clubs;</td><td>9</td><td>4&clubs;</td><td>13</td><td>5&clubs;</td><td>17</td><td>6&clubs;</td><td>21</td><td>7&clubs;</td><td>25</td><td>8&clubs;</td></tr><tr class="red-text"><td>2</td><td class="red">2&hearts;</td><td>6</td><td class="red">3&hearts;</td><td>10</td><td class="red">4&hearts;</td><td>14</td><td class="red">5&hearts;</td><td>18</td><td class="red">6&hearts;</td><td>22</td><td class="red">7&hearts;</td><td>26</td><td class="red">8&hearts;</td></tr><tr class="red-text"><td>3</td><td class="red">2&diams;</td><td>7</td><td class="red">3&diams;</td><td>11</td><td class="red">4&diams;</td><td>15</td><td class="red">5&diams;</td><td>19</td><td class="red">6&diams;</td><td>23</td><td class="red">7&diams;</td><td>27</td><td class="red">8&diams;</td></tr></tbody></table><p><br /></p><table class="table refactoring-step-by-step"><tbody><tr><td>28</td><td>9&spades;</td><td>32</td><td>10&spades;</td><td>36</td><td>J&spades;</td><td>40</td><td>D&spades;</td><td>44</td><td>K&spades;</td><td>48</td><td>A&spades;</td></tr><tr><td>29</td><td>9&clubs;</td><td>33</td><td>10&clubs;</td><td>37</td><td>J&clubs;</td><td>41</td><td>D&clubs;</td><td>45</td><td>K&clubs;</td><td>49</td><td>A&clubs;</td></tr><tr class="red-text"><td>30</td><td class="red">9&hearts;</td><td>34</td><td class="red">10&hearts;</td><td>38</td><td class="red">J&hearts;</td><td>42</td><td class="red">D&hearts;</td><td>46</td><td class="red">K&hearts;</td><td>50</td><td class="red">A&hearts;</td></tr><tr class="red-text"><td>31</td><td class="red">9&diams;</td><td>35</td><td class="red">10&diams;</td><td>39</td><td class="red">J&diams;</td><td>43</td><td class="red">D&diams;</td><td>47</td><td class="red">K&diams;</td><td>52</td><td class="red">A&diams;</td></tr></tbody></table><p>So code like <code class="highlighter-rouge">array.map {|item| item / 4}</code> tells us which figure from 2 to ace is on card and code like this <code class="highlighter-rouge">array.map {|item| item % 4}</code> represents the color of a card (♠, ♣, ♥, ♦).</p><p>For more explanation of poker rules, please check <a href="https://en.wikipedia.org/wiki/List_of_poker_hands" title="Poker hands" target="_blank" rel="nofollow noopener noreferrer">wiki page to list all of poker hands</a>.</p><p>We add an initializer:</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">array</span><span class="p">)</span>
  <span class="vi">@array</span> <span class="o">=</span> <span class="n">array</span><span class="p">.</span><span class="nf">sort</span>
  <span class="vi">@cards</span> <span class="o">=</span> <span class="vi">@array</span><span class="p">.</span><span class="nf">map</span> <span class="p">{</span> <span class="o">|</span><span class="n">item</span><span class="o">|</span> <span class="n">item</span> <span class="o">/</span> <span class="mi">4</span> <span class="p">}</span>
<span class="k">end</span>
</code></pre></div></div><p>Example of a method before change:</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">three_of_a_kind?</span><span class="p">(</span><span class="n">array</span><span class="p">)</span>
  <span class="nb">hash</span> <span class="o">=</span> <span class="no">Hash</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
  <span class="n">array</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">item</span><span class="o">|</span> <span class="nb">hash</span><span class="p">[</span><span class="n">item</span> <span class="o">/</span> <span class="mi">4</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="p">}</span>
  <span class="nb">hash</span><span class="p">.</span><span class="nf">values</span><span class="p">.</span><span class="nf">include?</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="k">end</span>
</code></pre></div></div><p>After:</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">three_of_a_kind?</span>
  <span class="nb">hash</span> <span class="o">=</span> <span class="no">Hash</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
  <span class="vi">@cards</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">item</span><span class="o">|</span> <span class="nb">hash</span><span class="p">[</span><span class="n">item</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="p">}</span>
  <span class="nb">hash</span><span class="p">.</span><span class="nf">values</span><span class="p">.</span><span class="nf">include?</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="k">end</span>
</code></pre></div></div><p>We remove some of duplication and use state of the class instance to improve our code. After this step you can find the code <a href="https://github.com/womanonrails/poker/blob/83d230e969df4d27ffa5e5e34a2cf1aa43e76d90/lib/poker/hand.rb" title="Code after 4th step of refactoring" target="_blank" rel="nofollow noopener noreferrer">here</a>. Quick note - I also did small refactoring on tests. I just moved the test cases to the array to also remove duplication there.</p><h2 id="stats-1">Stats:</h2><ul><li><strong>LOC</strong> - 76</li><li><strong>LOT</strong> - 190</li><li><strong>Flog</strong> - 70.9</li><li><strong>Flay</strong> - 57</li><li><strong>Tests</strong> - 104 examples, 0 failures</li></ul><h1 id="step-5---remove-duplication">Step 5 - Remove duplication</h1><p>Base on Reek metric I noticed a lot of duplication in code. So I decided to move this code to one method and use the state of the class’ instance one more time. You can find the whole step <a href="https://github.com/womanonrails/poker/blob/74c05d7480e7857d1e99d604169f6eed46279758/lib/poker/hand.rb" title="Code after 5th step of refactoring" target="_blank" rel="nofollow noopener noreferrer">here</a>. And this is a quick overview.</p><p>We change the initalizer:</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">array</span><span class="p">)</span>
  <span class="vi">@array</span> <span class="o">=</span> <span class="n">array</span><span class="p">.</span><span class="nf">sort</span>
  <span class="vi">@cards</span> <span class="o">=</span> <span class="vi">@array</span><span class="p">.</span><span class="nf">map</span> <span class="p">{</span> <span class="o">|</span><span class="n">item</span><span class="o">|</span> <span class="n">item</span> <span class="o">/</span> <span class="mi">4</span> <span class="p">}</span>
  <span class="vi">@frequency</span> <span class="o">=</span> <span class="n">cards_frequency</span>
<span class="k">end</span>
</code></pre></div></div><p>New method <code class="highlighter-rouge">cards_frequency</code>:</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">cards_frequency</span>
  <span class="nb">hash</span> <span class="o">=</span> <span class="no">Hash</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
  <span class="vi">@cards</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">item</span><span class="o">|</span> <span class="nb">hash</span><span class="p">[</span><span class="n">item</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="p">}</span>
  <span class="nb">hash</span><span class="p">.</span><span class="nf">values</span>
<span class="k">end</span>
</code></pre></div></div><p>Example of a method before change:</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">four_of_a_kind?</span>
  <span class="nb">hash</span> <span class="o">=</span> <span class="no">Hash</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
  <span class="vi">@cards</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">item</span><span class="o">|</span> <span class="nb">hash</span><span class="p">[</span><span class="n">item</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="p">}</span>
  <span class="nb">hash</span><span class="p">.</span><span class="nf">values</span><span class="p">.</span><span class="nf">include?</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="k">end</span>
</code></pre></div></div><p>After:</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">four_of_a_kind?</span>
  <span class="vi">@frequency</span><span class="p">.</span><span class="nf">include?</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="k">end</span>
</code></pre></div></div><h2 id="stats-2">Stats:</h2><ul><li><strong>LOC</strong> - 76</li><li><strong>LOT</strong> - 190</li><li><strong>Flog</strong> - 61.0</li><li><strong>Flay</strong> - 0</li><li><strong>Tests</strong> - 104 examples, 0 failures</li></ul><h1 id="step-6---small-public-interface">Step 6 - Small public interface</h1><p>When you will look at the code from <a href="https://github.com/womanonrails/poker/blob/74c05d7480e7857d1e99d604169f6eed46279758/lib/poker/hand.rb" title="Code after 5th step of refactoring" target="_blank" rel="nofollow noopener noreferrer">step 5</a>, you will notice that all methods are public. <strong>The big public interface is something hard to maintain.</strong> If you will try to replace class <code class="highlighter-rouge">Hand</code> by other class you need to prepare class with the same big interface. If something is public you can use it everywhere, what also can provide new dependencies in the code. In this case, when you look closer, you will see that even tests are checking only the method <code class="highlighter-rouge">check</code>. I decided to declare all others method as private. This change is visible <a href="https://github.com/womanonrails/poker/blob/ef117a56e3cc0fbfae9de4821ac61e5489f704fc/lib/poker/hand.rb" title="Code after 6th step of refactoring" target="_blank" rel="nofollow noopener noreferrer">here</a>.</p><h2 id="stats-3">Stats:</h2><ul><li><strong>LOC</strong> - 77</li><li><strong>LOT</strong> - 190</li><li><strong>Flog</strong> - 59.9</li><li><strong>Flay</strong> - 0</li><li><strong>Tests</strong> - 104 examples, 0 failures</li></ul><h1 id="step-7---more-clean-ups">Step 7 - More clean ups</h1><p>This step is similar to step 5. I removed more duplication in code and decided to change names to be more specific. I created new method <code class="highlighter-rouge">cards_figures_and_colors</code> which prepare now two things: <code class="highlighter-rouge">figures</code> and <code class="highlighter-rouge">colors</code>. You can say now: <em>where is <strong>Single responsibility principle</strong> or that is <strong>micro optimalization</strong></em> because now I use only one loop instead 2. My intuition tells me that this is ok. But you can have a different opinion. That’s fine for me. I respect that. This is how this method looks like:</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">cards_figures_and_colors</span>
  <span class="vi">@array</span><span class="p">.</span><span class="nf">map</span> <span class="p">{</span> <span class="o">|</span><span class="n">item</span><span class="o">|</span> <span class="p">[</span><span class="n">item</span> <span class="o">/</span> <span class="mi">4</span><span class="p">,</span> <span class="n">item</span> <span class="o">%</span> <span class="mi">4</span><span class="p">]</span> <span class="p">}.</span><span class="nf">transpose</span>
<span class="k">end</span>
</code></pre></div></div><p>and I’m open to discuss if this was a good or bad step. This change affects also our <code class="highlighter-rouge">initialize</code> method:</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">array</span><span class="p">)</span>
  <span class="vi">@array</span> <span class="o">=</span> <span class="n">array</span><span class="p">.</span><span class="nf">sort</span>
  <span class="vi">@figures</span><span class="p">,</span> <span class="vi">@colors</span> <span class="o">=</span> <span class="n">cards_figures_and_colors</span>
  <span class="vi">@frequency</span> <span class="o">=</span> <span class="n">cards_frequency</span><span class="p">.</span><span class="nf">values</span>
<span class="k">end</span>
</code></pre></div></div><p>In this step I also did change in method <code class="highlighter-rouge">cards_frequency</code>. I used there <code class="highlighter-rouge">each_with_object</code> (you can find more about this method in my article <a href="https://womanonrails.com/each-with-object" title="Quick overview Ruby of each_with_object method">Quick overview - each_with_object method</a>) instead of <code class="highlighter-rouge">each</code> like this:</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">cards_frequency</span>
  <span class="vi">@figures</span><span class="p">.</span><span class="nf">each_with_object</span><span class="p">(</span><span class="no">Hash</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span> <span class="k">do</span> <span class="o">|</span><span class="n">item</span><span class="p">,</span> <span class="nb">hash</span><span class="o">|</span>
    <span class="nb">hash</span><span class="p">[</span><span class="n">item</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div><p>Thanks to <code class="highlighter-rouge">@colors</code> instance variable I can change <code class="highlighter-rouge">flush?</code> method from:</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">flush?</span>
  <span class="n">color</span> <span class="o">=</span> <span class="vi">@array</span><span class="p">.</span><span class="nf">map</span> <span class="p">{</span> <span class="o">|</span><span class="n">item</span><span class="o">|</span> <span class="n">item</span> <span class="o">%</span> <span class="mi">4</span> <span class="p">}</span>
  <span class="n">color</span><span class="p">.</span><span class="nf">uniq</span><span class="p">.</span><span class="nf">size</span> <span class="o">==</span> <span class="mi">1</span>
<span class="k">end</span>
</code></pre></div></div><p>to:</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">flush?</span>
  <span class="vi">@colors</span><span class="p">.</span><span class="nf">uniq</span><span class="p">.</span><span class="nf">size</span> <span class="o">==</span> <span class="mi">1</span>
<span class="k">end</span>
</code></pre></div></div><p>You can see all the changes <a href="https://github.com/womanonrails/poker/blob/46e12428d0d67cb90d17f417147dc936815a69e7/lib/poker/hand.rb" title="Code after 7th step of refactoring" target="_blank" rel="nofollow noopener noreferrer">here</a></p><h2 id="stats-4">Stats:</h2><ul><li><strong>LOC</strong> - 80</li><li><strong>LOT</strong> - 190</li><li><strong>Flog</strong> - 64.5</li><li><strong>Flay</strong> - 0</li><li><strong>Tests</strong> - 104 examples, 0 failures</li></ul><h1 id="summarize">Summarize</h1><p>Let’s summarize what we’ve done till this point:</p><ul><li>We used metrics to do first cleanup in the code - to start</li><li>We simplified the code using tests and our understanding of logic</li><li>We changed procedural code and used for that more object oriented approach</li><li>We removed duplications</li><li>and we created a small public interface</li></ul><p>In my next article I would like to go deeper with this refactoring and focus on:</p><ul><li>Code which is more descriptive</li><li>Metaprograming as method to write more elastic code</li><li>Preparing small independent classes, then one big class</li><li>Building classes as elements which are replaceable and possible to combine</li><li>Explanation why I used metrics on each step and what they tell us</li></ul><p>Stay tuned! My next article will come soon! If you like this article share your thoughts with me in the comments below. Thank you so much for being here. And see you next time. Bye!</p><hr /><h3 id="bibliography">Bibliography</h3><h4 id="books">Books</h4><ul><li><a href="https://www.amazon.de/gp/product/0201485672?ie=UTF8&amp;tag=womanonrails-21&amp;camp=1638&amp;linkCode=xm2&amp;creativeASIN=0201485672" title="The book describes the process of refactoring and spends most of its time explaining how to do the various refactorings" target="_blank" rel="nofollow noopener">Refactoring: Improving the Design of Existing Code - Martin Fowler</a></li><li><a href="https://www.amazon.de/gp/product/0132350882?ie=UTF8&amp;tag=womanonrails-21&amp;camp=1638&amp;linkCode=xm2&amp;creativeASIN=0132350882" title="This book is a must for any developer, software engineer, project manager, team lead, or systems analyst with an interest in producing better code." target="_blank" rel="nofollow noopener">Clean Code: A Handbook of Agile Software Craftsmanship - Robert C. Martin</a></li><li><a href="https://www.amazon.de/gp/product/0321490452?ie=UTF8&amp;tag=womanonrails-21&amp;camp=1638&amp;linkCode=xm2&amp;creativeASIN=0321490452" title="This book provides a great demonstration of the key &quot;Gang of Four&quot; design patterns without resorting to overly technical explanations." target="_blank" rel="nofollow noopener">Design Patterns in Ruby - Russ Olsen</a></li><li><a href="https://www.amazon.de/gp/product/0321146530?ie=UTF8&amp;tag=womanonrails-21&amp;camp=1638&amp;linkCode=xm2&amp;creativeASIN=0321146530" title="Follows two TDD projects from start to finish, illustrating techniques programmers can use to increase the quality of their work." target="_blank" rel="nofollow noopener">Test Driven Development: By Example - Ken Beck</a></li><li><a href="https://www.amazon.de/gp/product/0134456475?ie=UTF8&amp;tag=womanonrails-21&amp;camp=1638&amp;linkCode=xm2&amp;creativeASIN=0134456475" title="POODR is a practical, readable introduction to how OOD can lower your costs and improve your applications." target="_blank" rel="nofollow noopener">Practical Object-Oriented Design in Ruby: An Agile Primer - Sandi Metz</a></li><li><a href="https://www.amazon.de/gp/product/0135957052?ie=UTF8&amp;tag=womanonrails-21&amp;camp=1638&amp;linkCode=xm2&amp;creativeASIN=0135957052" title="This is one of those rare tech books you will read, re-read, and read again over the years and you will come away with fresh insights each and every time." target="_blank" rel="nofollow noopener">The Pragmatic Programmer: Journey to Mastery - Andrew Hund, David Thomas</a></li></ul><h4 id="presentations">Presentations</h4><ul><li><a href="https://www.youtube.com/watch?v=8bZh5LMaSmE" rel="nofollow noopener noreferrer" title="All the Little Things by Sandi Metz" target="_blank">All the Little Things by Sandi Metz</a></li><li><a href="https://www.youtube.com/watch?v=5yX6ADjyqyE" rel="nofollow noopener noreferrer" title="Fat Models with Patterns by Bryan Helmkamp" target="_blank">LA Ruby Conference 2013 Refactoring Fat Models with Patterns by Bryan Helmkamp</a></li><li><a href="https://www.youtube.com/watch?v=OMPfEXIlTVE" rel="nofollow noopener noreferrer" title="Nothing is something by Sandi Metz" target="_blank">Nothing is something by Sandi Metz</a></li><li><a href="https://infinum.co/the-capsized-eight/best-ruby-on-rails-refactoring-talks" rel="nofollow noopener noreferrer" title="8 best Ruby on Rails refactoring talks" target="_blank">Best Ruby on Rails refactoring talks</a></li></ul><br><div class='entry-tags text-center'> <span class='svg--tags'><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 230 230"><path d="M95.084 0H.13v95.475L134.658 230l95.212-95.212L95.084 0zM61.138 61.268c-6.988 6.989-18.321 6.989-25.309 0-6.989-6.987-6.99-18.321 0-25.308 6.987-6.99 18.321-6.989 25.309 0 6.989 6.987 6.989 18.321 0 25.308z"/></svg></span> Tagged with <a href="/tags/#Ruby" data-toggle='tooltip' title='Posts tagged with Ruby' rel='tag'>Ruby</a></div></div></article></div><footer class='post-footer entry-meta'><div class='post-share text-center'><p class='light small'> Share this post</p><ul class='social-mini'><li> <a data-toggle='tooltip' href="https://twitter.com/intent/tweet?text=&quot;Ruby Refactoring step by step - part 1&quot;%20https://womanonrails.com/refactoring-step-by-step%20via%20&#64;womanonrails" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;" title='Share on Twitter'> <span class='svg--twitter'><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg></span> </a></li><li> <a data-toggle='tooltip' href='https://www.facebook.com/sharer/sharer.php?u=https://womanonrails.com/refactoring-step-by-step' onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;" title='Share on Facebook'> <span class='svg--facebook'><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 264 512"><path d="M76.7 512V283H0v-91h76.7v-71.7C76.7 42.4 124.3 0 193.8 0c33.3 0 61.9 2.5 70.2 3.6V85h-48.2c-37.8 0-45.1 18-45.1 44.3V192H256l-11.7 91h-73.6v229"/></svg></span> </a></li></ul></div><div class="post-author text-center"> <img src="https://womanonrails.com/images/womanonrails-square.svg" alt="Agnieszka Małaszkiewicz's photo" itemprop="image" class="post-avatar img-circle img-responsive"/><h4 class="bordered-bottom vcard author" itemprop="author" itemscope itemtype="https://schema.org/Person">By <span itemprop="name" class="fn"><a href="https://womanonrails.com/about" title="About Agnieszka Małaszkiewicz" itemprop="url">Agnieszka Małaszkiewicz</a></span></h4><p>Woman, programmer, mentor, speaker, photographer and dancer with passion.</p></div></footer></div></div><footer id='footer' class='blog-background overlay text-center align-middle animated from-top'><div class='inner'><div class='container'><ul class='social-icons'><li> <a href='https://twitter.com/womanonrails' rel='nofollow noopener noreferrer' target='_blank'> <span class='svg--twitter'><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg></span> </a></li><li> <a href='https://facebook.com/womanonrails' rel='nofollow noopener noreferrer' target='_blank'> <span class='svg--facebook'><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 264 512"><path d="M76.7 512V283H0v-91h76.7v-71.7C76.7 42.4 124.3 0 193.8 0c33.3 0 61.9 2.5 70.2 3.6V85h-48.2c-37.8 0-45.1 18-45.1 44.3V192H256l-11.7 91h-73.6v229"/></svg></span> </a></li><li> <a href='https://stackoverflow.com/users/2885676/womanonrails' rel='nofollow noopener noreferrer' target='_blank'> <span class='svg--stackoverflow'><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path d="M293.7 300l-181.2-84.5 16.7-36.5 181.3 84.7-16.8 36.3zm48-76L188.2 95.7l-25.5 30.8 153.5 128.3 25.5-30.8zm39.6-31.7L262 32l-32 24 119.3 160.3 32-24zM290.7 311L95 269.7 86.8 309l195.7 41 8.2-39zm31.6 129H42.7V320h-40v160h359.5V320h-40v120zm-39.8-80h-200v39.7h200V360z"/></svg></span> </a></li><li> <a href='https://linkedin.com/in/womanonrails' rel='nofollow noopener noreferrer' target='_blank'> <span class='svg--linkedin'><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M100.3 480H7.4V180.9h92.9V480zM53.8 140.1C24.1 140.1 0 115.5 0 85.8 0 56.1 24.1 32 53.8 32c29.7 0 53.8 24.1 53.8 53.8 0 29.7-24.1 54.3-53.8 54.3zM448 480h-92.7V334.4c0-34.7-.7-79.2-48.3-79.2-48.3 0-55.7 37.7-55.7 76.7V480h-92.8V180.9h89.1v40.8h1.3c12.4-23.5 42.7-48.3 87.9-48.3 94 0 111.3 61.9 111.3 142.3V480z"/></svg></span> </a></li><li> <a href='https://instagram.com/womanonrails' rel='nofollow noopener noreferrer' target='_blank'> <span class='svg--linkedin'><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"/></svg></span> </a></li><li> <a href='https://github.com/womanonrails' rel='nofollow noopener noreferrer' target='_blank'> <span class='svg--github'><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 399.378c0 2.052-2.3 3.693-5.2 3.693-3.3.307-5.6-1.334-5.6-3.693 0-2.05 2.3-3.692 5.2-3.692 3-.307 5.6 1.334 5.6 3.692zm-31.1-4.615c-.7 2.051 1.3 4.41 4.3 5.026 2.6 1.025 5.6 0 6.2-2.052.6-2.05-1.3-4.41-4.3-5.333-2.6-.718-5.5.308-6.2 2.36zm44.2-1.743c-2.9.718-4.9 2.666-4.6 5.025.3 2.051 2.9 3.385 5.9 2.667 2.9-.718 4.9-2.667 4.6-4.718-.3-1.949-3-3.282-5.9-2.974zM244.8 0C106.1 0 0 107.998 0 250.253c0 113.741 69.8 211.073 169.5 245.33 12.8 2.358 17.3-5.744 17.3-12.411 0-6.359-.3-41.435-.3-62.973 0 0-70 15.384-84.7-30.564 0 0-11.4-29.846-27.8-37.538 0 0-22.9-16.102 1.6-15.794 0 0 24.9 2.05 38.6 26.46 21.9 39.59 58.6 28.205 72.9 21.436 2.3-16.41 8.8-27.794 16-34.563-55.9-6.36-112.3-14.667-112.3-113.332 0-28.205 7.6-42.358 23.6-60.41-2.6-6.666-11.1-34.153 2.6-69.64 20.9-6.666 69 27.693 69 27.693 20-5.744 41.5-8.718 62.8-8.718 21.3 0 42.8 2.974 62.8 8.718 0 0 48.1-34.461 69-27.692 13.7 35.589 5.2 62.973 2.6 69.64 16 18.153 25.8 32.307 25.8 60.409 0 98.973-58.9 106.87-114.8 113.332 9.2 8.102 17 23.486 17 47.589 0 34.563-.3 77.332-.3 85.742 0 6.666 4.6 14.769 17.3 12.41 100-34.05 167.8-131.383 167.8-245.124C496 107.998 383.5 0 244.8 0zM97.2 353.738c-1.3 1.026-1 3.385.7 5.333 1.6 1.641 3.9 2.36 5.2 1.026 1.3-1.026 1-3.385-.7-5.333-1.6-1.641-3.9-2.36-5.2-1.026zm-10.8-8.307c-.7 1.333.3 2.974 2.3 4 1.6 1.025 3.6.717 4.3-.718.7-1.334-.3-2.975-2.3-4-2-.616-3.6-.308-4.3.718zm32.4 36.512c-1.6 1.333-1 4.41 1.3 6.359 2.3 2.359 5.2 2.666 6.5 1.025 1.3-1.333.7-4.41-1.3-6.359-2.2-2.358-5.2-2.666-6.5-1.025zm-11.4-15.077c-1.6 1.026-1.6 3.692 0 6.051 1.6 2.36 4.3 3.385 5.6 2.36 1.6-1.334 1.6-4 0-6.36-1.4-2.359-4-3.384-5.6-2.05z"/></svg></span> </a></li></ul><div> Agnieszka Małaszkiewicz &copy; 2021 &bull; All rights reserved.</div><ul class='menu-items'><li> <a href="/"> <span class='svg--home'><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M16 256L256 64l96 72v-32h48v72l96 80h-48v192H328V288h-96v160H64V256z"/></svg></span> </a>&bull;</li><li> <a href="/workshops"> Programming courses </a>&bull;</li><li> <a href="/categories"> Categories </a>&bull;</li><li> <a href="/tags"> Tags </a>&bull;</li><li> <a href="/about"> About </a>&bull;</li><li> <a href="/feed.xml" title='Atom/RSS feed'> <span class='svg--rss'><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>RSS icon</title><path d="M19.199 24C19.199 13.467 10.533 4.8 0 4.8V0c13.165 0 24 10.835 24 24h-4.801zM3.291 17.415c1.814 0 3.293 1.479 3.293 3.295 0 1.813-1.485 3.29-3.301 3.29C1.47 24 0 22.526 0 20.71s1.475-3.294 3.291-3.295zM15.909 24h-4.665c0-6.169-5.075-11.245-11.244-11.245V8.09c8.727 0 15.909 7.184 15.909 15.91z"/></svg></span> Feed </a></li></ul></div><div> <a class='btn btn-default' href='https://paypal.me/womanonrails' target='_blank' rel='nofollow noopener' style='border-radius: 10px !important;'> <img alt='PayPal' height='20' src='/images/donations/paypal.svg'> </a> <a href='https://ko-fi.com/womanonrails' target='_blank' rel='nofollow noopener'> <img alt='Ko-fi' height='34' src='/images/donations/ko-fi.svg'> </a></div></div><div class="decor-wrapper"> <svg id="footer-decor" class="decor top" xmlns="https://www.w3.org/2000/svg" version="1.1" viewBox="0 0 100 100" preserveAspectRatio="none"><path class="large left" d="M0 0 L50 50 L0 100" fill="rgba(255,255,255, .1)"></path><path class="large right" d="M100 0 L50 50 L100 100" fill="rgba(255,255,255, .1)"></path><path class="medium left" d="M0 0 L50 50 L0 66.6" fill="rgba(255,255,255, .3)"></path><path class="medium right" d="M100 0 L50 50 L100 66.6" fill="rgba(255,255,255, .3)"></path><path class="small left" d="M0 0 L50 50 L0 33.3" fill="rgba(255,255,255, .5)"></path><path class="small right" d="M100 0 L50 50 L100 33.3" fill="rgba(255,255,255, .5)"></path><path d="M0 0 L50 50 L100 0 L0 0" fill="rgba(255,255,255, 1)"></path><path d="M48 48 L50 51 L52 48 L48 48" fill="rgba(255,255,255, 1)"></path> </svg></div></footer><script async src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> <script>window.jQuery || document.write('<script src="https://womanonrails.com/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script> <script src="https://womanonrails.com/assets/js/scripts.min.js"></script> <script type="text/javascript" src="https://womanonrails.com/assets/js/waypoints.min.js"></script> <script type="text/javascript" src="https://womanonrails.com/assets/js/script.js"></script> <script type='text/javascript'>$(document).ready(function(){$(".time").text(function(a,b){return Math.round(parseFloat(b))})});</script> <script type="text/javascript"> /* Slides */ $("a#slide").click(function(){ $("#sidebar,body,a#slide,#fade").addClass("slide") }); $("#fade,#header,#posts-container").click(function(){ $("#sidebar,body,a#slide,#fade").removeClass("slide") }); $("a#click-filter").click(function(){ $("#slide-filter").slideToggle("medium"); $("#slide-pages").slideOut("medium"); }); $("a#click-pages").click(function(){ $("#slide-pages").slideToggle("medium"); $("#slide-filter").slideOut("medium"); }); /* End-Slides */ </script> <script> $(document).ready(function() { $('.search-field').simpleJekyllSearch({ jsonFile : '/search.json', searchResults : '.search-results', template : '<li><article><a href="{url}">{title} <span class="entry-date"><time datetime="{date}">{shortdate}</time></span></a></article></li>', noResults: '<p>Nothing found.</p>' }); }); (function( $, window, undefined ) { var bs = { close: $(".js-remove-sign"), searchform: $(".search-form"), canvas: $("body"), dothis: $('.dosearch') }; bs.dothis.on('click', function() { $('.search-wrapper').css({ display: "block" }); bs.searchform.toggleClass('active'); bs.searchform.find('input').focus(); bs.canvas.toggleClass('search-overlay'); }); bs.close.on('click', function() { $('.search-wrapper').removeAttr( 'style' ); bs.searchform.toggleClass('active'); bs.canvas.removeClass('search-overlay'); }); })( jQuery, window ); </script> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-127731573-1"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-127731573-1'); </script></body></html>
