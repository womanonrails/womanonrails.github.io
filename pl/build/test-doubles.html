<!DOCTYPE html><html lang="en"><head><meta charset='utf-8'><title>Test doubles - the difference between stubs and mocks</title><meta name='description' content='How to use different types of test doubles?'><meta name='viewport' content='width=device-width, initial-scale=1.0'><meta name="generator" content="Jekyll v4.0.1" /><meta property="og:title" content="Test doubles - the difference between stubs and mocks" /><meta name="author" content="womanonrails" /><meta property="og:locale" content="en" /><meta name="description" content="How to use different types of test doubles?" /><meta property="og:description" content="How to use different types of test doubles?" /><link rel="canonical" href="https://womanonrails.com/test-doubles" /><meta property="og:url" content="https://womanonrails.com/test-doubles" /><meta property="og:site_name" content="Woman on Rails" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-06-18T00:00:00-04:00" /> <script type="application/ld+json"> {"description":"How to use different types of test doubles?","url":"https://womanonrails.com/test-doubles","@type":"BlogPosting","headline":"Test doubles - the difference between stubs and mocks","dateModified":"2021-06-18T00:00:00-04:00","datePublished":"2021-06-18T00:00:00-04:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://womanonrails.com/test-doubles"},"author":{"@type":"Person","name":"womanonrails"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://womanonrails.com/womanonrails-square.svg"},"name":"womanonrails"},"@context":"https://schema.org"}</script><meta name='twitter:card' content='summary_large_image'><meta name='twitter:creator' content='@womanonrails'><meta name='twitter:description' content='How to use different types of test doubles?'><meta name='twitter:image' content='https://womanonrails.com/images/test-doubles/og_image-test-doubles.png'><meta name='twitter:title' content='Test doubles - the difference between stubs and mocks'><meta property='og:description' content='How to use different types of test doubles?'><meta property='og:image' content='https://womanonrails.com/images/test-doubles/og_image-test-doubles.png'><meta property='og:title' content='Test doubles - the difference between stubs and mocks'><meta property='og:type' content='website'><link href='https://womanonrails.com/favicon.ico' rel='shortcut icon' type='image/x-icon' /><link href='https://womanonrails.com/favicon.png' rel='shortcut icon' type='image/png' /><link href='/feed.xml' rel='alternate' title='Woman on Rails Feed' type='application/atom+xml' /><link async href='/assets/css/bootstrap.css' media='all' rel='stylesheet' /><link href='/assets/css/style.css' media='all' rel='stylesheet' /><link href='/css/main.css' media='all' rel='stylesheet' /><link href='/assets/css/applause-button.css' rel='stylesheet' /> <script defer src='/assets/js/applause-button.js'></script><div class="search-wrapper"><div class="search-form"> <input type="text" class="search-field" placeholder="Search..."> <span class='js-remove-sign'> <span class='svg--cancel'><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 375 375"><path d="M187.5 2.5a185 185 0 0 0-185 185 185 185 0 0 0 185 185 185 185 0 0 0 185-185 185 185 0 0 0-185-185zm-85.906 78.875a20.232 20.232 0 0 1 14.518 6.132l71.388 71.388 71.388-71.388a20.232 20.232 0 0 1 13.909-6.121 20.232 20.232 0 0 1 14.702 34.73l-71.39 71.388 71.39 71.39a20.232 20.232 0 1 1-28.61 28.61L187.5 216.115l-71.388 71.389a20.232 20.232 0 1 1-28.611-28.61l71.39-71.39-71.39-71.388a20.232 20.232 0 0 1 14.093-34.74z"/></svg></span> </span><ul class="search-results post-list"></ul></div></div></head><body class="post-template" itemscope itemtype="https://schema.org/WebPage"><div id="fade"></div><a id="slide" class="animated fade"></a><aside id="sidebar"><nav id="navigation"><h2>MENU</h2><hr><ul><li> <a href="https://womanonrails.com/">Home</a></li><li> <a href="https://womanonrails.com/workshops">Programming courses</a></li><li> <a href="https://womanonrails.com/categories">Categories</a></li><li> <a href="https://womanonrails.com/tags">Tags</a></li><li> <a href="https://womanonrails.com/presentations/">Presentations</a></li><li> <a href="https://womanonrails.com/about">About me</a></li><li> <a href="/feed.xml" title='Atom/RSS feed'> <span class='svg--rss'><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>RSS icon</title><path d="M19.199 24C19.199 13.467 10.533 4.8 0 4.8V0c13.165 0 24 10.835 24 24h-4.801zM3.291 17.415c1.814 0 3.293 1.479 3.293 3.295 0 1.813-1.485 3.29-3.301 3.29C1.47 24 0 22.526 0 20.71s1.475-3.294 3.291-3.295zM15.909 24h-4.665c0-6.169-5.075-11.245-11.244-11.245V8.09c8.727 0 15.909 7.184 15.909 15.91z"/></svg></span> Feed </a></li></ul></nav></aside><header class='blog-background overlay align-center align-middle animated from-bottom' id='masthead' itemscope itemtype='https://schema.org/Organization'> <button class='menu-button animated fade dosearch' title='Search'> <span class='svg--search'><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 13"> <g stroke-width="1.5" fill="none"><path d="M11.29 11.71l-4-4"/><circle cx="5" cy="5" r="4"/> </g> </svg></span> </button> <a href="/pl/test-doubles" class='language animated fade'> pl </a><div class='inner'><div class='container'> <a class='brand' href='/' itemprop='url' role='banner'> <img itemprop='logo' src="https://womanonrails.com/images/womanonrails-square.svg" alt="Woman on Rails Logo" width='120' /><h1 class='blog-title light' itemprop='name'> Woman on Rails</h1></a><h2 class='blog-description light bordered bordered-top' itemprop='description'> Premature optimization is the root of all evil.</h2></div></div><div class="decor-wrapper"> <svg id="header-decor" class="decor bottom" xmlns="https://www.w3.org/2000/svg" version="1.1" viewBox="0 0 100 100" preserveAspectRatio="none"><path class="large left" d="M0 0 L50 50 L0 100" fill="rgba(255,255,255, .1)"></path><path class="large right" d="M100 0 L50 50 L100 100" fill="rgba(255,255,255, .1)"></path><path class="medium left" d="M0 100 L50 50 L0 33.3" fill="rgba(255,255,255, .3)"></path><path class="medium right" d="M100 100 L50 50 L100 33.3" fill="rgba(255,255,255, .3)"></path><path class="small left" d="M0 100 L50 50 L0 66.6" fill="rgba(255,255,255, .5)"></path><path class="small right" d="M100 100 L50 50 L100 66.6" fill="rgba(255,255,255, .5)"></path><path d="M0 99.9 L50 49.9 L100 99.9 L0 99.9" fill="rgba(255,255,255, 1)"></path><path d="M48 52 L50 49 L52 52 L48 52" fill="rgba(255,255,255, 1)"></path> </svg></div></header><div class='content' id='main' itemprop='mainContentOfPage' itemscope itemtype='https://schema.org/WebPageElement' role='main'><div class='container'><div class='row'><div class='applause hidden-xs hidden-sm'> <applause-button color='#c33' multiclap='true' style='width: 58px; height: 58px;' url='https://womanonrails.com/test-doubles' /></div><article class='post col-md-8 col-md-offset-2 hentry' itemprop='blogPost' itemscope itemtype='https://schema.org/BlogPosting'><header class='post-header entry-header'><h1 class='post-title text-center hyper lighter bordered-bottom entry-title' itemprop='headline'> Test doubles - the difference between stubs and mocks</h1><div class='cursive'>How to use different types of test doubles?</div><div class='post-info text-center small'> <span class='post-tags'> <a data-toggle='tooltip' href="/categories/#testing" title="Other posts from the Testing category" rel="tag">Testing</a> </span> | <span class='post-tags reading-time'> <span class='time'>11</span> min. </span></div></header><div class='post-body bordered-bottom' itemprop='description'><p>In the testing world, we have <strong>stubs</strong>, <strong>mocks</strong>, <strong>dummy objects</strong>, and so on. It can be confusing what to use and when to use it. I would like to organize all of those terms in a more accessible way. There is one problem. In many different sources, we have discrepancies regards to those terms. I will show you my understanding of this topic. Of course, based on chosen sources.</p><p>First of all, what is <strong>test double</strong>? The test double is any object used for testing purposes, which replaces the real object. So, this test double pretends to be some real object in a test. Here are different types of test doubles: <a href="#dummy-object">dummy</a>, <a href="#fake-object">fake</a>, <a href="#stub-object">stub</a>, <a href="#spy-object">spy</a>, or <a href="#mock-object">mock</a>. Now we can go through all of those specific terms.</p><h2 id="dummy-object">Dummy object</h2><p><strong>Dummy object</strong> is a bogus object <strong>passed to the code to satisfy the API</strong>. We usually put it to the parameter/argument/attribute list, but we don’t need to use it. Dummy objects don’t have an implementation. We can say it’s empty like an eggshell. I can use it, for example, when I’m testing the method of a class that requires mandatory attribute(s) in an initializer (constructor), which has no impact on my method. I may use a dummy object in that case for the creation of a class instance.</p><h4 id="example">Example</h4><p>I notice that I don’t use dummy objects too often. In most cases, I use other test doubles instead of a dummy object. So, the example will be more showcase than the real code example. I will use the <strong>RSpec</strong> tool for that.</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">EmailRecipient</span>
  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">recipient</span><span class="p">)</span>
    <span class="vi">@recipient</span> <span class="o">=</span> <span class="n">recipient</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">message_already_received?</span>
    <span class="kp">false</span>
  <span class="k">end</span>

  <span class="o">...</span>
<span class="k">end</span>

<span class="no">RSpec</span><span class="p">.</span><span class="nf">describe</span> <span class="no">EmailRecipient</span> <span class="k">do</span>
  <span class="n">describe</span> <span class="s1">'#message_already_received?'</span> <span class="k">do</span>
    <span class="n">it</span> <span class="s1">'returns false'</span> <span class="k">do</span>
      <span class="n">recipient</span> <span class="o">=</span> <span class="n">double</span><span class="p">(</span><span class="no">Recipient</span><span class="p">)</span>

      <span class="n">email_recipient</span> <span class="o">=</span> <span class="no">EmailRecipient</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">recipient</span><span class="p">)</span>

      <span class="n">expect</span><span class="p">(</span><span class="n">recipient</span><span class="p">.</span><span class="nf">message_already_received?</span><span class="p">).</span><span class="nf">to</span> <span class="n">eq</span> <span class="kp">false</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="o">...</span>
<span class="k">end</span>
</code></pre></div></div><p>The <code class="highlighter-rouge">EmailRecipient</code> has one argument in the initializer that isn’t used in the <code class="highlighter-rouge">message_already_received?</code>. In this case, I don’t care too much about the <code class="highlighter-rouge">recipient</code> instance variable. Instead of <code class="highlighter-rouge">double</code>, I could even use the <code class="highlighter-rouge">nil</code> value here. As you can see, it’s like a shell, nothing inside.</p><h2 id="fake-object">Fake object</h2><p><strong>Fake</strong> in an object with working implementation, but in most cases, it’s simpler than on production. So, you won’t use it there. <strong>The purpose of a fake object is to simplify the way we test code</strong>. It removes unnecessary or heavyweight dependencies and allows us to focus only on our code, not interactions with some external infrastructure, for example. The most common cases where we use fake are:</p><ul><li>in-memory or one-file database, like SQLite - It’s good for testing, more lightweight than the <em>real</em> database, but you wouldn’t use it on production.</li><li>save data to files on disk or in-memory file system instead of using external service for that (e.g. Amazon S3) - In your case, the <em>save to disk</em> implementation is a fake. On production, you’d use real external storage. In your unit test, you don’t need it. It’s a good practice to does not interact with external infrastructure in unit tests.</li></ul><h4 id="example-1">Example</h4><p>The example will be Rails <strong>Active Storage</strong> functionality. It facilitates uploading files to cloud storage services and then attaches those files to Active Record objects. In production environment setups, we will do something like:</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># config/environments/production.rb</span>
<span class="n">config</span><span class="p">.</span><span class="nf">active_storage</span><span class="p">.</span><span class="nf">service</span> <span class="o">=</span> <span class="ss">:amazon</span>
</code></pre></div></div><p>but in the case of tests, we will set:</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># config/environments/test.rb</span>

<span class="c1"># Store uploaded files on the local file system in a temporary directory.</span>
<span class="n">config</span><span class="p">.</span><span class="nf">active_storage</span><span class="p">.</span><span class="nf">service</span> <span class="o">=</span> <span class="ss">:test</span>
</code></pre></div></div><p>Storage setups can look like this:</p><div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># config/storage.yml</span>

<span class="na">test</span><span class="pi">:</span>
  <span class="na">service</span><span class="pi">:</span> <span class="s">Disk</span>
  <span class="na">root</span><span class="pi">:</span> <span class="s">&lt;%= Rails.root.join('tmp/storage') %&gt;</span>

<span class="na">amazon</span><span class="pi">:</span>
  <span class="na">service</span><span class="pi">:</span> <span class="s">S3</span>
  <span class="na">access_key_id</span><span class="pi">:</span> <span class="s">&lt;%= ENV.fetch('AWS_DOCUMENT_ACCESS_KEY_ID') %&gt;</span>
  <span class="na">secret_access_key</span><span class="pi">:</span> <span class="s">&lt;%= ENV.fetch('AWS_DOCUMENT_SECRET_ACCESS_KEY') %&gt;</span>
  <span class="na">bucket</span><span class="pi">:</span> <span class="s">&lt;%= ENV.fetch('AWS_DOCUMENT_BUCKET') %&gt;</span>
  <span class="na">region</span><span class="pi">:</span> <span class="s">&lt;%= ENV.fetch('AWS_IMAGE_REGION') %&gt;</span>
</code></pre></div></div><p>Thanks to those settings, we can test upload functionality using a local file system instead of cloud storage. We simplify logic related to file upload for tests. It’s transparent for us.</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">module</span> <span class="nn">Admin</span>
  <span class="k">module</span> <span class="nn">Book</span>
    <span class="k">class</span> <span class="nc">AttachmentsController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
      <span class="o">...</span>

      <span class="k">def</span> <span class="nf">update</span>
        <span class="n">book_form</span><span class="p">.</span><span class="nf">files</span><span class="p">.</span><span class="nf">attach</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="ss">:book</span><span class="p">][</span><span class="ss">:files</span><span class="p">])</span>
        <span class="n">book_form</span><span class="p">.</span><span class="nf">save</span>

        <span class="n">flash</span><span class="p">[</span><span class="ss">:notice</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'Document has been uploaded for this book'</span>
        <span class="n">redirect_to</span> <span class="n">admin_book_path</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
      <span class="k">end</span>

      <span class="o">...</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="k">module</span> <span class="nn">Admin</span>
  <span class="k">module</span> <span class="nn">Book</span>
    <span class="no">RSpec</span><span class="p">.</span><span class="nf">describe</span> <span class="no">AttachmentsController</span><span class="p">,</span> <span class="ss">type: :controller</span> <span class="k">do</span>
      <span class="n">describe</span> <span class="s1">'#update'</span> <span class="k">do</span>
        <span class="n">it</span> <span class="s1">'adds file to book'</span> <span class="k">do</span>
          <span class="n">admin</span> <span class="o">=</span> <span class="n">create</span><span class="p">(</span><span class="ss">:user</span><span class="p">,</span> <span class="ss">:confirmed</span><span class="p">,</span> <span class="ss">:admin</span><span class="p">)</span>
          <span class="n">login_user</span><span class="p">(</span><span class="n">admin</span><span class="p">)</span>
          <span class="n">book</span> <span class="o">=</span> <span class="n">create</span><span class="p">(</span><span class="ss">:book</span><span class="p">)</span>
          <span class="n">file</span> <span class="o">=</span> <span class="no">Rack</span><span class="o">::</span><span class="no">Test</span><span class="o">::</span><span class="no">UploadedFile</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span>
            <span class="no">Rails</span><span class="p">.</span><span class="nf">root</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="s1">'spec/support/fixtures/test.png'</span><span class="p">),</span> <span class="s1">'image/png'</span>
          <span class="p">)</span>

          <span class="n">expect</span> <span class="p">{</span>
            <span class="n">put</span> <span class="ss">:update</span><span class="p">,</span> <span class="ss">params: </span><span class="p">{</span> <span class="ss">book_id: </span><span class="n">book</span><span class="p">.</span><span class="nf">id</span><span class="p">,</span> <span class="ss">book: </span><span class="p">{</span> <span class="ss">files: </span><span class="p">[</span><span class="n">file</span><span class="p">]</span> <span class="p">}</span> <span class="p">}</span>
          <span class="p">}.</span><span class="nf">to</span> <span class="n">change</span> <span class="p">{</span> <span class="n">book</span><span class="p">.</span><span class="nf">reload</span><span class="p">.</span><span class="nf">files</span><span class="p">.</span><span class="nf">attached?</span> <span class="p">}.</span><span class="nf">from</span><span class="p">(</span><span class="kp">false</span><span class="p">).</span><span class="nf">to</span><span class="p">(</span><span class="kp">true</span><span class="p">)</span>
        <span class="k">end</span>
      <span class="k">end</span>

      <span class="o">...</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div><h2 id="stub-object">Stub object</h2><p><strong>Stub</strong> provides hard-coded answers to calls done during the test. It’s an object, in most cases, responding only to what was programmed in for test purposes, nothing else. We can say that stub overrides methods and returns needed for test values. <strong>The purpose of a stub is to prepare a specific state of your system under the test.</strong></p><p>For example, we want to test a class dependent on time consuming and complex calculations. Those calculations are tested separately. So in our case, we want to have some specific result from those calculations. We prepare the state of our system for the test. No matter how we get there. The most important is how the system will behave in that particular state. We use a shortcut - the stub.</p><h4 id="example-1">Example 1</h4><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">UserDuplicates</span>
  <span class="o">...</span>

  <span class="k">def</span> <span class="nf">each</span>
    <span class="n">duplicate_users</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">user_duplicate</span><span class="o">|</span>
      <span class="n">mismatched_attributes</span> <span class="o">=</span> <span class="n">mismatched_attributes</span><span class="p">(</span><span class="n">user_duplicate</span><span class="p">)</span>
      <span class="n">match_level</span> <span class="o">=</span> <span class="no">TypeOfUserMatch</span><span class="p">.</span><span class="nf">result_for</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> <span class="ss">user_duplicate: </span><span class="n">user_duplicate</span><span class="p">)</span>

      <span class="k">yield</span> <span class="n">user_duplicate</span><span class="p">,</span> <span class="n">match_level</span><span class="p">,</span> <span class="n">mismatched_attributes</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="o">...</span>
<span class="k">end</span>
</code></pre></div></div><p>Let’s assume that the <code class="highlighter-rouge">TypeOfUserMatch</code> class has complex calculations. They take 2-3 seconds to finish. We don’t want to wait till the end of calculations. So, we will use the stub to provide a specific state of those calculations in our test case.</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">RSpec</span><span class="p">.</span><span class="nf">describe</span> <span class="no">UserDuplicates</span> <span class="k">do</span>
  <span class="n">describe</span> <span class="s1">'#each'</span> <span class="k">do</span>
    <span class="n">it</span> <span class="s1">'yields fully duplicated objects'</span> <span class="k">do</span>
      <span class="n">user_data</span> <span class="o">=</span> <span class="p">{</span>
        <span class="o">...</span>
      <span class="p">}</span>
      <span class="n">user</span> <span class="o">=</span> <span class="n">create</span><span class="p">(</span><span class="ss">:user</span><span class="p">,</span> <span class="o">**</span><span class="n">user_data</span><span class="p">)</span>
      <span class="n">user_duplicate</span> <span class="o">=</span> <span class="n">create</span><span class="p">(</span><span class="ss">:user</span><span class="p">,</span> <span class="o">**</span><span class="n">user_data</span><span class="p">)</span>
      <span class="n">allow</span><span class="p">(</span><span class="no">TypeOfUserMatch</span><span class="p">).</span><span class="nf">to</span> <span class="n">receive</span><span class="p">(</span><span class="ss">:result_for</span><span class="p">).</span><span class="nf">and_return</span><span class="p">(</span><span class="ss">:full</span><span class="p">)</span>

      <span class="n">expect</span> <span class="p">{</span> <span class="o">|</span><span class="n">n</span><span class="o">|</span> <span class="no">UserDuplicates</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">user</span><span class="p">).</span><span class="nf">each</span><span class="p">(</span><span class="o">&amp;</span><span class="n">n</span><span class="p">)</span> <span class="p">}.</span><span class="nf">to</span> <span class="n">yield_successive_args</span><span class="p">([</span>
        <span class="n">user_duplicate</span><span class="p">,</span> <span class="ss">:full</span><span class="p">,</span> <span class="p">[]</span>
      <span class="p">])</span>
    <span class="k">end</span>

    <span class="o">...</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div><p>Alert! If for some reason, we will stop using <code class="highlighter-rouge">TypeOfUserMatch</code>, this test can still pass. For example, in case the logic will be fulfilled. The test won’t tell us that we don’t use <code class="highlighter-rouge">TypeOfUserMatch</code>. It’s important. Keep it in mind. I will come back to this information in the <a href="#mock-object">mock section</a>.</p><p>I’d like to mention one more thing here. By doing some adjustments in the code, like dependency injection, we could use different RSpec mechanisms. A <code class="highlighter-rouge">class_double</code> to stub the class state. The <code class="highlighter-rouge">class_double</code> is similar to <code class="highlighter-rouge">instance_double</code>. Both are useful because they verify if we are compatible with the class/object interface. In case we change the name of a method or remove it, the test will fail. Below you can find a possible look for the test.</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">RSpec</span><span class="p">.</span><span class="nf">describe</span> <span class="no">UserDuplicates</span> <span class="k">do</span>
  <span class="n">describe</span> <span class="s1">'#each'</span> <span class="k">do</span>
    <span class="n">it</span> <span class="s1">'yields fully duplicated objects'</span> <span class="k">do</span>
      <span class="n">user_data</span> <span class="o">=</span> <span class="p">{</span>
        <span class="o">...</span>
      <span class="p">}</span>
      <span class="n">user</span> <span class="o">=</span> <span class="n">create</span><span class="p">(</span><span class="ss">:user</span><span class="p">,</span> <span class="o">**</span><span class="n">user_data</span><span class="p">)</span>
      <span class="n">user_duplicate</span> <span class="o">=</span> <span class="n">create</span><span class="p">(</span><span class="ss">:user</span><span class="p">,</span> <span class="o">**</span><span class="n">user_data</span><span class="p">)</span>
      <span class="n">user_match_double</span> <span class="o">=</span> <span class="n">class_double</span><span class="p">(</span><span class="no">TypeOfUserMatch</span><span class="p">,</span> <span class="ss">result_for: :full</span><span class="p">)</span>

      <span class="n">expect</span> <span class="p">{</span> <span class="o">|</span><span class="n">n</span><span class="o">|</span> <span class="no">UserDuplicates</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> <span class="n">user_match_double</span><span class="p">).</span><span class="nf">each</span><span class="p">(</span><span class="o">&amp;</span><span class="n">n</span><span class="p">)</span> <span class="p">}.</span>
        <span class="nf">to</span> <span class="n">yield_successive_args</span><span class="p">([</span>
          <span class="n">user_duplicate</span><span class="p">,</span> <span class="ss">:full</span><span class="p">,</span> <span class="p">[]</span>
        <span class="p">])</span>
    <span class="k">end</span>

    <span class="o">...</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div><h3 id="using-stub-with-api">Using stub with API</h3><p>Another example is interaction with external REST API. Generally, it’s good practice don’t call the external API in test cases (at least in low-level tests, like unit tests). To don’t depend on it. It’s a good place to use stubs. You can try different API answers, like responses with a specific error. This way, you could write tests that check how the system reacts for specific API states.</p><h4 id="example-2">Example 2</h4><p>Let’s see how could it looks like. We have API with quotes. Here is a code:</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Client</span>
  <span class="no">BASE_URI</span> <span class="o">=</span> <span class="s1">'http://quotes.rest'</span>

  <span class="k">def</span> <span class="nf">get_qod</span><span class="p">(</span><span class="n">category</span><span class="p">)</span>
    <span class="n">response</span> <span class="o">=</span> <span class="no">HTTParty</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span>
      <span class="s2">"</span><span class="si">#{</span><span class="no">BASE_URI</span><span class="si">}</span><span class="s2">/qod.json"</span><span class="p">,</span>
      <span class="ss">headers: </span><span class="n">headers</span><span class="p">,</span>
      <span class="ss">query: </span><span class="s2">"category=</span><span class="si">#{</span><span class="n">category</span><span class="si">}</span><span class="s2">"</span>
    <span class="p">)</span>
    <span class="n">parse_response</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
    <span class="o">...</span>
  <span class="k">end</span>

  <span class="o">...</span>
<span class="k">end</span>
</code></pre></div></div><p>Now, the test. Of course, it won’t give us 100% that code is working. It’s just a stub. There are some other ways to check that, but let’s focus on our test.</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">RSpec</span><span class="p">.</span><span class="nf">describe</span> <span class="no">Client</span> <span class="k">do</span>
  <span class="n">describe</span> <span class="s1">'#get_qod'</span> <span class="k">do</span>
    <span class="n">it</span> <span class="s1">'returns quote object'</span> <span class="k">do</span>
      <span class="n">body</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">'success'</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="s1">'total'</span> <span class="o">=&gt;</span> <span class="mi">1</span> <span class="p">},</span>
        <span class="s1">'contents'</span> <span class="o">=&gt;</span> <span class="p">{</span>
          <span class="s1">'quotes'</span> <span class="o">=&gt;</span> <span class="p">[</span>
            <span class="p">{</span>
              <span class="s1">'quote'</span> <span class="o">=&gt;</span> <span class="s1">'A leader is the wave pushed ahead by the ship.'</span><span class="p">,</span>
              <span class="s1">'length'</span> <span class="o">=&gt;</span> <span class="s1">'46'</span><span class="p">,</span>
              <span class="s1">'author'</span> <span class="o">=&gt;</span> <span class="s1">'Leo Nikolaevich Tolstoy'</span><span class="p">,</span>
              <span class="s1">'tags'</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">'leadership'</span><span class="p">,</span> <span class="s1">'management'</span><span class="p">],</span>
              <span class="s1">'category'</span> <span class="o">=&gt;</span> <span class="s1">'management'</span><span class="p">,</span>
              <span class="o">...</span>
            <span class="p">}</span>
          <span class="p">],</span>
          <span class="o">...</span>
        <span class="p">}</span>
      <span class="p">}</span>
      <span class="n">stub_request</span><span class="p">(</span><span class="ss">:get</span><span class="p">,</span> <span class="s1">'http://quotes.rest/qod.json'</span><span class="p">).</span>
        <span class="nf">with</span><span class="p">(</span>
          <span class="ss">headers: </span><span class="p">{</span>
            <span class="s1">'Content-Type'</span> <span class="o">=&gt;</span> <span class="s1">'application/json'</span><span class="p">,</span>
            <span class="s1">'Accept'</span> <span class="o">=&gt;</span> <span class="s1">'application/json'</span>
          <span class="p">},</span>
          <span class="ss">query: </span><span class="p">{</span> <span class="s1">'category'</span> <span class="o">=&gt;</span> <span class="s1">'management'</span> <span class="p">}</span>
        <span class="p">).</span>
        <span class="nf">to_return</span><span class="p">(</span><span class="ss">body: </span><span class="n">body</span><span class="p">.</span><span class="nf">to_json</span><span class="p">)</span>

      <span class="n">result</span> <span class="o">=</span> <span class="no">Client</span><span class="p">.</span><span class="nf">new</span><span class="p">.</span><span class="nf">get_qod</span><span class="p">(</span><span class="s1">'management'</span><span class="p">)</span>

      <span class="n">expect</span><span class="p">(</span><span class="n">result</span><span class="p">).</span><span class="nf">to</span> <span class="n">match</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div><p>Here is an example of how the code reacts to specific API states.</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">RSpec</span><span class="p">.</span><span class="nf">describe</span> <span class="no">Client</span> <span class="k">do</span>
  <span class="n">describe</span> <span class="s1">'#get_qod'</span> <span class="k">do</span>
    <span class="o">...</span>

    <span class="n">it</span> <span class="s1">'returns empty hash when there is a Net::ReadTimeout'</span> <span class="k">do</span>
      <span class="n">allow</span><span class="p">(</span><span class="no">HTTParty</span><span class="p">).</span><span class="nf">to</span> <span class="n">receive</span><span class="p">(</span><span class="ss">:get</span><span class="p">).</span><span class="nf">and_raise</span><span class="p">(</span><span class="no">Net</span><span class="o">::</span><span class="no">ReadTimeout</span><span class="p">)</span>

      <span class="n">result</span> <span class="o">=</span> <span class="no">Client</span><span class="p">.</span><span class="nf">new</span><span class="p">.</span><span class="nf">get_qod</span><span class="p">(</span><span class="s1">'management'</span><span class="p">)</span>

      <span class="n">expect</span><span class="p">(</span><span class="n">result</span><span class="p">).</span><span class="nf">to</span> <span class="n">match</span><span class="p">({})</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div><h2 id="spy-object">Spy object</h2><p>In my understanding of spy, <strong>spy</strong> is a specific type of stub that can also record some information based on how it was called. Spy takes over some calls to the real objects and verifies those calls without replacing the entire original object. At some point, it can sound similar to a fake. For me, the fake object is more of a transparent layer. We use it to simplify the tests. The spy object allows us to verify some information. I’d say that <strong>the purpose of a spy is to help us with verifying some information on an object normally hard to verify</strong>.</p><p>Alert! In RSpec we can find <strong>spy</strong> method. In my opinion, from its behavior point of view, it’s more like <a href="#mock-object">mock object</a>.</p><p>For example, when you want to verify sending an email, depends on the spy type, you can get information about: sending a message, the number of sent messages, or even what is in the email body.</p><h4 id="example-2">Example</h4><p>Something like that we can find in Rails to verify emails. In the test configuration, we have:</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># config/environments/test.rb</span>

<span class="c1"># Tell Action Mailer not to deliver emails to the real world.</span>
<span class="c1"># The :test delivery method accumulates sent emails in the</span>
<span class="c1"># ActionMailer::Base.deliveries array.</span>
<span class="n">config</span><span class="p">.</span><span class="nf">action_mailer</span><span class="p">.</span><span class="nf">delivery_method</span> <span class="o">=</span> <span class="ss">:test</span>
</code></pre></div></div><p>Then we can test sending emails:</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">RSpec</span><span class="p">.</span><span class="nf">describe</span> <span class="no">SendDailyNewsletter</span> <span class="k">do</span>
  <span class="n">describe</span> <span class="s1">'.call'</span> <span class="k">do</span>
    <span class="n">it</span> <span class="s1">'delivers daily newsletter for subscriber'</span> <span class="k">do</span>
      <span class="o">...</span>

      <span class="n">expect</span> <span class="p">{</span>
        <span class="no">SendDailyNewsletter</span><span class="p">.</span><span class="nf">call</span>
      <span class="p">}.</span><span class="nf">to</span> <span class="n">change</span> <span class="p">{</span> <span class="no">ActionMailer</span><span class="o">::</span><span class="no">Base</span><span class="p">.</span><span class="nf">deliveries</span><span class="p">.</span><span class="nf">count</span> <span class="p">}.</span><span class="nf">by</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div><h2 id="mock-object">Mock object</h2><p><strong>Mock</strong> is a part of your test that you have to set up with expectations. It’s an object pre-programmed with expectations about calls it’s expected to receive. <strong>The purpose of a mock is to make assertions about how the system will interact with the dependency.</strong> In other words, mock verify the interactions between objects. So, you don’t expect that mock return some value (like in the case of stub object), but to check that specific method was called.</p><p>For example, after calling the <code class="highlighter-rouge">save</code> method on the new <code class="highlighter-rouge">User</code> object, mock expect that the <code class="highlighter-rouge">SendConfirmationEmail</code> service should be called.</p><h4 id="example-1-1">Example 1</h4><p>Let’s go back to the <code class="highlighter-rouge">UserDuplicates</code> example. When I would like to check if the <code class="highlighter-rouge">result_for</code> method is called, it could look like this:</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">RSpec</span><span class="p">.</span><span class="nf">describe</span> <span class="no">UserDuplicates</span> <span class="k">do</span>
  <span class="n">describe</span> <span class="s1">'#each'</span> <span class="k">do</span>
    <span class="n">it</span> <span class="s1">'calls result_for method for each user duplicate'</span> <span class="k">do</span>
      <span class="n">user_data</span> <span class="o">=</span> <span class="p">{</span>
        <span class="o">...</span>
      <span class="p">}</span>
      <span class="n">user</span> <span class="o">=</span> <span class="n">create</span><span class="p">(</span><span class="ss">:user</span><span class="p">,</span> <span class="o">**</span><span class="n">user_data</span><span class="p">)</span>
      <span class="n">user_duplicate</span> <span class="o">=</span> <span class="n">create</span><span class="p">(</span><span class="ss">:user</span><span class="p">,</span> <span class="o">**</span><span class="n">user_data</span><span class="p">)</span>
      <span class="n">allow</span><span class="p">(</span><span class="no">TypeOfUserMatch</span><span class="p">).</span><span class="nf">to</span> <span class="n">receive</span><span class="p">(</span><span class="ss">:result_for</span><span class="p">).</span><span class="nf">and_return</span><span class="p">(</span><span class="ss">:full</span><span class="p">)</span>

      <span class="no">UserDuplicates</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">user</span><span class="p">).</span><span class="nf">each</span> <span class="p">{}</span>

      <span class="n">expect</span><span class="p">(</span><span class="no">TypeOfGuestMatch</span><span class="p">).</span><span class="nf">to</span> <span class="n">have_received</span><span class="p">(</span><span class="ss">:result_for</span><span class="p">).</span>
        <span class="nf">with</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> <span class="ss">user_duplicate: </span><span class="n">user_duplicate</span><span class="p">)</span>
    <span class="k">end</span>

    <span class="o">...</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div><p>In the example above, first, I declare that I watch the <code class="highlighter-rouge">result_for</code> method using <code class="highlighter-rouge">allow</code>. Then I run code <code class="highlighter-rouge">UserDuplicates.new(user).each {}</code>. In the end, I verify if the <code class="highlighter-rouge">result_for</code> method was called by using <code class="highlighter-rouge">expect</code>.</p><h4 id="example-2-1">Example 2</h4><p>Now I will declare my expectation using <code class="highlighter-rouge">expect</code>. Then I will run a code <code class="highlighter-rouge">UserDuplicates.new(user).each {}</code>. In this case, verification will be done automatically.</p><div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">RSpec</span><span class="p">.</span><span class="nf">describe</span> <span class="no">UserDuplicates</span> <span class="k">do</span>
  <span class="n">describe</span> <span class="s1">'#each'</span> <span class="k">do</span>
    <span class="n">it</span> <span class="s1">'calls result_for method for each user duplicate'</span> <span class="k">do</span>
      <span class="n">user_data</span> <span class="o">=</span> <span class="p">{</span>
        <span class="o">...</span>
      <span class="p">}</span>
      <span class="n">user</span> <span class="o">=</span> <span class="n">create</span><span class="p">(</span><span class="ss">:user</span><span class="p">,</span> <span class="o">**</span><span class="n">user_data</span><span class="p">)</span>
      <span class="n">user_duplicate</span> <span class="o">=</span> <span class="n">create</span><span class="p">(</span><span class="ss">:user</span><span class="p">,</span> <span class="o">**</span><span class="n">user_data</span><span class="p">)</span>

      <span class="n">expect</span><span class="p">(</span><span class="no">TypeOfUserMatch</span><span class="p">).</span><span class="nf">to</span> <span class="n">receive</span><span class="p">(</span><span class="ss">:result_for</span><span class="p">).</span>
        <span class="nf">with</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> <span class="ss">user_duplicate: </span><span class="n">user_duplicate</span><span class="p">).</span>
        <span class="nf">and_return</span><span class="p">(</span><span class="ss">:full</span><span class="p">)</span>

      <span class="no">UserDuplicates</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">user</span><span class="p">).</span><span class="nf">each</span> <span class="p">{}</span>
    <span class="k">end</span>

    <span class="o">...</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div><p>I like more the first example. It is easier for me to read and understand, but you can have your preferences.</p><h2 id="what-is-the-difference-between-stub-and-mock">What is the difference between Stub and Mock?</h2><p>In my opinion, a stub is an object that returns a hard-coded answer. So it represents a specific state of the real object. Mock, on the other hand, verify if a specific method was called. It’s testing the behavior. I like the idea that stub returns answers to the question and mock verifies if the question was asked.</p><h2 id="what-are-the-advantages-and-disadvantages-of-test-doubles">What are the advantages and disadvantages of test doubles?</h2><h4 id="advantage">Advantage</h4><ul><li>eliminates complex fixtures - when you work with real objects in your tests, especially with big systems, your fixture can be quite complex to cover all the cases. It’s something that can resolve test doubles.</li><li>support independent tests - when we use the real objects, a small change in the object can break a lot of tests. It’s the next thing where tests doubles can help.</li><li>faster tests - Since you don’t need to create full-real objects (for example, create objects and save them in the database) or do time-consuming calculations, it can speed.</li></ul><h4 id="disadvantage">Disadvantage</h4><ul><li>can give false positives - your test doubles can be incorrect. Your unit tests are green, but under the hoot, your code is not working. It’s why I suggest using both approaches: real objects and test doubles.</li><li>coupled to the implementation - In the case of mocks, your tests are coupled to the method or class implementation. When implementation changed, it’s more likely your tests will break.</li><li>problem with refactoring - since tests with mocks can be coupled to your code implementation, it can impact the refactoring in your system.</li></ul><h2 id="bibliography">Bibliography</h2><ul><li><a href="https://martinfowler.com/articles/mocksArentStubs.html" title="Martin Fowler - Mocks Aren't Stubs" target="_blank" rel="nofollow">Mocks Aren’t Stubs - Martin Fowler</a></li><li><a href="https://blog.cleancoder.com/uncle-bob/2014/05/14/TheLittleMocker.html" title="Robert C. Martin - The Little Mocker" target="_blank" rel="nofollow">The Little Mocker - Robert C. Martin</a></li><li><a href="https://stackoverflow.com/questions/3459287/whats-the-difference-between-a-mock-stub" title="What's the difference between a mock &amp; stub?" target="_blank" rel="nofollow">What’s the difference between a mock &amp; stub?</a></li><li><a href="https://stackoverflow.com/questions/346372/whats-the-difference-between-faking-mocking-and-stubbing" title="What's the difference between faking, mocking, and stubbing?" target="_blank" rel="nofollow">What’s the difference between faking, mocking, and stubbing?</a></li><li><a href="https://relishapp.com/rspec/rspec-mocks/docs" title="RSpec Mocks" target="_blank" rel="nofollow">RSpec Mocks</a></li><li><a href="https://relishapp.com/rspec/rspec-mocks/docs/verifying-doubles" title="RSpec verifying doubles" target="_blank" rel="nofollow">RSpec verifying doubles</a></li></ul><br><div class='entry-tags text-center'> <span class='svg--tags'><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 230 230"><path d="M95.084 0H.13v95.475L134.658 230l95.212-95.212L95.084 0zM61.138 61.268c-6.988 6.989-18.321 6.989-25.309 0-6.989-6.987-6.99-18.321 0-25.308 6.987-6.99 18.321-6.989 25.309 0 6.989 6.987 6.989 18.321 0 25.308z"/></svg></span> Tagged with <a href="/tags/#tdd" data-toggle='tooltip' title='Posts tagged with tdd' rel='tag'>tdd</a> &bull; <a href="/tags/#tests" data-toggle='tooltip' title='Posts tagged with tests' rel='tag'>tests</a> &bull; <a href="/tags/#mocks" data-toggle='tooltip' title='Posts tagged with mocks' rel='tag'>mocks</a> &bull; <a href="/tags/#stubs" data-toggle='tooltip' title='Posts tagged with stubs' rel='tag'>stubs</a></div></div></article></div><footer class='post-footer entry-meta'><div class='post-share text-center'><p class='light small'> Share this post</p><ul class='social-mini'><li> <a data-toggle='tooltip' href="https://twitter.com/intent/tweet?text=&quot;Test doubles - the difference between stubs and mocks&quot;%20https://womanonrails.com/test-doubles%20via%20&#64;womanonrails" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;" title='Share on Twitter'> <span class='svg--twitter'><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg></span> </a></li><li> <a data-toggle='tooltip' href='https://www.facebook.com/sharer/sharer.php?u=https://womanonrails.com/test-doubles' onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;" title='Share on Facebook'> <span class='svg--facebook'><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 264 512"><path d="M76.7 512V283H0v-91h76.7v-71.7C76.7 42.4 124.3 0 193.8 0c33.3 0 61.9 2.5 70.2 3.6V85h-48.2c-37.8 0-45.1 18-45.1 44.3V192H256l-11.7 91h-73.6v229"/></svg></span> </a></li></ul></div><div class="post-author text-center"> <img src="https://womanonrails.com/images/womanonrails-square.svg" alt="Agnieszka Małaszkiewicz's photo" itemprop="image" class="post-avatar img-circle img-responsive"/><h4 class="bordered-bottom vcard author" itemprop="author" itemscope itemtype="https://schema.org/Person">By <span itemprop="name" class="fn"><a href="https://womanonrails.com/about" title="About Agnieszka Małaszkiewicz" itemprop="url">Agnieszka Małaszkiewicz</a></span></h4><p>Woman, programmer, mentor, speaker, photographer and dancer with passion.</p></div></footer></div></div><footer id='footer' class='blog-background overlay text-center align-middle animated from-top'><div class='inner'><div class='container'><ul class='social-icons'><li> <a href='https://twitter.com/womanonrails' rel='nofollow noopener noreferrer' target='_blank'> <span class='svg--twitter'><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg></span> </a></li><li> <a href='https://facebook.com/womanonrails' rel='nofollow noopener noreferrer' target='_blank'> <span class='svg--facebook'><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 264 512"><path d="M76.7 512V283H0v-91h76.7v-71.7C76.7 42.4 124.3 0 193.8 0c33.3 0 61.9 2.5 70.2 3.6V85h-48.2c-37.8 0-45.1 18-45.1 44.3V192H256l-11.7 91h-73.6v229"/></svg></span> </a></li><li> <a href='https://stackoverflow.com/users/2885676/womanonrails' rel='nofollow noopener noreferrer' target='_blank'> <span class='svg--stackoverflow'><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path d="M293.7 300l-181.2-84.5 16.7-36.5 181.3 84.7-16.8 36.3zm48-76L188.2 95.7l-25.5 30.8 153.5 128.3 25.5-30.8zm39.6-31.7L262 32l-32 24 119.3 160.3 32-24zM290.7 311L95 269.7 86.8 309l195.7 41 8.2-39zm31.6 129H42.7V320h-40v160h359.5V320h-40v120zm-39.8-80h-200v39.7h200V360z"/></svg></span> </a></li><li> <a href='https://linkedin.com/in/womanonrails' rel='nofollow noopener noreferrer' target='_blank'> <span class='svg--linkedin'><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M100.3 480H7.4V180.9h92.9V480zM53.8 140.1C24.1 140.1 0 115.5 0 85.8 0 56.1 24.1 32 53.8 32c29.7 0 53.8 24.1 53.8 53.8 0 29.7-24.1 54.3-53.8 54.3zM448 480h-92.7V334.4c0-34.7-.7-79.2-48.3-79.2-48.3 0-55.7 37.7-55.7 76.7V480h-92.8V180.9h89.1v40.8h1.3c12.4-23.5 42.7-48.3 87.9-48.3 94 0 111.3 61.9 111.3 142.3V480z"/></svg></span> </a></li><li> <a href='https://instagram.com/womanonrails' rel='nofollow noopener noreferrer' target='_blank'> <span class='svg--linkedin'><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"/></svg></span> </a></li><li> <a href='https://github.com/womanonrails' rel='nofollow noopener noreferrer' target='_blank'> <span class='svg--github'><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 399.378c0 2.052-2.3 3.693-5.2 3.693-3.3.307-5.6-1.334-5.6-3.693 0-2.05 2.3-3.692 5.2-3.692 3-.307 5.6 1.334 5.6 3.692zm-31.1-4.615c-.7 2.051 1.3 4.41 4.3 5.026 2.6 1.025 5.6 0 6.2-2.052.6-2.05-1.3-4.41-4.3-5.333-2.6-.718-5.5.308-6.2 2.36zm44.2-1.743c-2.9.718-4.9 2.666-4.6 5.025.3 2.051 2.9 3.385 5.9 2.667 2.9-.718 4.9-2.667 4.6-4.718-.3-1.949-3-3.282-5.9-2.974zM244.8 0C106.1 0 0 107.998 0 250.253c0 113.741 69.8 211.073 169.5 245.33 12.8 2.358 17.3-5.744 17.3-12.411 0-6.359-.3-41.435-.3-62.973 0 0-70 15.384-84.7-30.564 0 0-11.4-29.846-27.8-37.538 0 0-22.9-16.102 1.6-15.794 0 0 24.9 2.05 38.6 26.46 21.9 39.59 58.6 28.205 72.9 21.436 2.3-16.41 8.8-27.794 16-34.563-55.9-6.36-112.3-14.667-112.3-113.332 0-28.205 7.6-42.358 23.6-60.41-2.6-6.666-11.1-34.153 2.6-69.64 20.9-6.666 69 27.693 69 27.693 20-5.744 41.5-8.718 62.8-8.718 21.3 0 42.8 2.974 62.8 8.718 0 0 48.1-34.461 69-27.692 13.7 35.589 5.2 62.973 2.6 69.64 16 18.153 25.8 32.307 25.8 60.409 0 98.973-58.9 106.87-114.8 113.332 9.2 8.102 17 23.486 17 47.589 0 34.563-.3 77.332-.3 85.742 0 6.666 4.6 14.769 17.3 12.41 100-34.05 167.8-131.383 167.8-245.124C496 107.998 383.5 0 244.8 0zM97.2 353.738c-1.3 1.026-1 3.385.7 5.333 1.6 1.641 3.9 2.36 5.2 1.026 1.3-1.026 1-3.385-.7-5.333-1.6-1.641-3.9-2.36-5.2-1.026zm-10.8-8.307c-.7 1.333.3 2.974 2.3 4 1.6 1.025 3.6.717 4.3-.718.7-1.334-.3-2.975-2.3-4-2-.616-3.6-.308-4.3.718zm32.4 36.512c-1.6 1.333-1 4.41 1.3 6.359 2.3 2.359 5.2 2.666 6.5 1.025 1.3-1.333.7-4.41-1.3-6.359-2.2-2.358-5.2-2.666-6.5-1.025zm-11.4-15.077c-1.6 1.026-1.6 3.692 0 6.051 1.6 2.36 4.3 3.385 5.6 2.36 1.6-1.334 1.6-4 0-6.36-1.4-2.359-4-3.384-5.6-2.05z"/></svg></span> </a></li></ul><div> Agnieszka Małaszkiewicz &copy; 2021 &bull; All rights reserved.</div><ul class='menu-items'><li> <a href="/"> <span class='svg--home'><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M16 256L256 64l96 72v-32h48v72l96 80h-48v192H328V288h-96v160H64V256z"/></svg></span> </a>&bull;</li><li> <a href="/workshops"> Programming courses </a>&bull;</li><li> <a href="/categories"> Categories </a>&bull;</li><li> <a href="/tags"> Tags </a>&bull;</li><li> <a href="/about"> About </a>&bull;</li><li> <a href="/feed.xml" title='Atom/RSS feed'> <span class='svg--rss'><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>RSS icon</title><path d="M19.199 24C19.199 13.467 10.533 4.8 0 4.8V0c13.165 0 24 10.835 24 24h-4.801zM3.291 17.415c1.814 0 3.293 1.479 3.293 3.295 0 1.813-1.485 3.29-3.301 3.29C1.47 24 0 22.526 0 20.71s1.475-3.294 3.291-3.295zM15.909 24h-4.665c0-6.169-5.075-11.245-11.244-11.245V8.09c8.727 0 15.909 7.184 15.909 15.91z"/></svg></span> Feed </a></li></ul></div><div> <a class='btn btn-default' href='https://paypal.me/womanonrails' target='_blank' rel='nofollow noopener' style='border-radius: 10px !important;'> <img alt='PayPal' height='20' src='/images/donations/paypal.svg'> </a> <a href='https://ko-fi.com/womanonrails' target='_blank' rel='nofollow noopener'> <img alt='Ko-fi' height='34' src='/images/donations/ko-fi.svg'> </a></div></div><div class="decor-wrapper"> <svg id="footer-decor" class="decor top" xmlns="https://www.w3.org/2000/svg" version="1.1" viewBox="0 0 100 100" preserveAspectRatio="none"><path class="large left" d="M0 0 L50 50 L0 100" fill="rgba(255,255,255, .1)"></path><path class="large right" d="M100 0 L50 50 L100 100" fill="rgba(255,255,255, .1)"></path><path class="medium left" d="M0 0 L50 50 L0 66.6" fill="rgba(255,255,255, .3)"></path><path class="medium right" d="M100 0 L50 50 L100 66.6" fill="rgba(255,255,255, .3)"></path><path class="small left" d="M0 0 L50 50 L0 33.3" fill="rgba(255,255,255, .5)"></path><path class="small right" d="M100 0 L50 50 L100 33.3" fill="rgba(255,255,255, .5)"></path><path d="M0 0 L50 50 L100 0 L0 0" fill="rgba(255,255,255, 1)"></path><path d="M48 48 L50 51 L52 48 L48 48" fill="rgba(255,255,255, 1)"></path> </svg></div></footer><script async src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> <script>window.jQuery || document.write('<script src="https://womanonrails.com/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script> <script src="https://womanonrails.com/assets/js/scripts.min.js"></script> <script type="text/javascript" src="https://womanonrails.com/assets/js/waypoints.min.js"></script> <script type="text/javascript" src="https://womanonrails.com/assets/js/script.js"></script> <script type='text/javascript'>$(document).ready(function(){$(".time").text(function(a,b){return Math.round(parseFloat(b))})});</script> <script type="text/javascript"> /* Slides */ $("a#slide").click(function(){ $("#sidebar,body,a#slide,#fade").addClass("slide") }); $("#fade,#header,#posts-container").click(function(){ $("#sidebar,body,a#slide,#fade").removeClass("slide") }); $("a#click-filter").click(function(){ $("#slide-filter").slideToggle("medium"); $("#slide-pages").slideOut("medium"); }); $("a#click-pages").click(function(){ $("#slide-pages").slideToggle("medium"); $("#slide-filter").slideOut("medium"); }); /* End-Slides */ </script> <script> $(document).ready(function() { $('.search-field').simpleJekyllSearch({ jsonFile : '/search.json', searchResults : '.search-results', template : '<li><article><a href="{url}">{title} <span class="entry-date"><time datetime="{date}">{shortdate}</time></span></a></article></li>', noResults: '<p>Nothing found.</p>' }); }); (function( $, window, undefined ) { var bs = { close: $(".js-remove-sign"), searchform: $(".search-form"), canvas: $("body"), dothis: $('.dosearch') }; bs.dothis.on('click', function() { $('.search-wrapper').css({ display: "block" }); bs.searchform.toggleClass('active'); bs.searchform.find('input').focus(); bs.canvas.toggleClass('search-overlay'); }); bs.close.on('click', function() { $('.search-wrapper').removeAttr( 'style' ); bs.searchform.toggleClass('active'); bs.canvas.removeClass('search-overlay'); }); })( jQuery, window ); </script> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-127731573-1"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-127731573-1'); </script></body></html>
